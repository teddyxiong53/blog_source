---
title: yocto之meta-freescale分析
date: 2023-12-28 17:25:28
tags:
	- yocto
---

--

https://tisyang.github.io/post/2016-08-29-freescale-yocto-custom-linux-image/

研究64位内核+纯32位应用的方式。找到freescale的代码。

觉得不错。研究一下。



https://github.com/Freescale/fsl-community-bsp-platform/tree/kirkstone

参考这里来取代码：

```
$: repo init -u https://github.com/Freescale/fsl-community-bsp-platform -b kirkstone
$: repo sync
```

编译：

```
MACHINE=t4240rdb  DISTRO=poky source setup-environment build
```

```
bitbake core-image-minimal
```

# meta-freescale

看看meta-freescale下面的东西。

## classes

| bbclass                 | 说明                                                         |
| ----------------------- | ------------------------------------------------------------ |
| fsl-dynamic-packagearch | Automatically set PACKAGE_ARCH for MACHINE_SOCARCH<br />这个可以很方便地在不同的soc直接复用二进制的package。<br />里面本质上就python代码。 |
| fsl-kernel-localversion | 添加do_kernel_localversion函数                               |
| fsl-u-boot-localversion |                                                              |
| image_types_fsl         |                                                              |
|                         |                                                              |
|                         |                                                              |
|                         |                                                              |

# imx系列芯片分析

i.MX系列芯片是NXP推出的一系列基于ARM架构的应用处理器，广泛用于各种嵌入式系统和移动设备。

这些芯片专为低功耗、高性能和多媒体处理而设计，适用于智能手机、平板电脑、智能家居设备、工业控制系统、汽车电子等多个领域。

主要特点包括：

1. **多核心处理**：i.MX系列芯片包括单核心、双核心、四核心甚至八核心的处理器，提供不同级别的性能和功耗平衡，以满足不同应用的需求。

2. **多媒体处理**：这些芯片集成了强大的多媒体处理能力，支持高清视频解码、3D图形加速和音频处理，适用于需要图像和音频处理的应用场景。

3. **低功耗设计**：i.MX系列芯片注重低功耗特性，在提供高性能的同时尽量降低能耗，适合移动设备和依靠电池供电的系统。

4. **丰富的外设接口**：这些芯片提供了各种外设接口，如USB、HDMI、Ethernet、SPI、I2C等，支持丰富的外围设备连接。

5. **广泛的应用领域**：i.MX系列广泛应用于消费电子、工业自动化、医疗设备、汽车电子等领域，为各种嵌入式系统提供处理解决方案。

由于其灵活性、性能和低功耗特性，i.MX系列芯片已成为嵌入式系统领域中的热门选择，并且在物联网（IoT）设备和智能边缘设备的开发中也得到广泛应用。

## powerpc架构为什么还有人用？

尽管在个人计算机和大多数消费电子产品中，x86和ARM架构的处理器更为常见，但PowerPC架构仍然有其存在和应用的理由：

1. **高性能应用**：PowerPC架构被广泛用于高性能计算、服务器和嵌入式系统领域。其优秀的性能、可靠性和稳定性使其成为处理大量数据和执行复杂计算的理想选择。例如，在科学计算、航空航天、天气预报等领域，PowerPC架构的处理器因其强大的性能而受欢迎。

2. **实时系统**：PowerPC架构对于需要高度实时性和可靠性的应用也非常有用，比如在工业控制、汽车电子等领域。其可预测性和稳定性使其成为实时系统的理想选择。

3. **传统市场影响**：某些领域仍然依赖于早期采用PowerPC架构的设备和系统，这些系统可能长期稳定运行并且没有更换的需求。因此，为了保持兼容性和维护现有的基础设施，仍然需要使用PowerPC架构。

4. **安全性**：某些场景下，PowerPC架构因其设计特点而被视为更安全的选择。例如，对于一些安全性要求极高的系统（比如军事、政府机构），PowerPC的架构特性可能被认为更难受到攻击。

尽管市场份额相对较小，但PowerPC架构在特定领域和特定应用中仍然具有重要地位，其优势在于其性能、可靠性和适用性。

## nxp为什么还有powerpc架构的芯片

NXP仍然在一些产品线上使用PowerPC架构的芯片，主要基于以下几个原因：

1. **遗留产品支持**：NXP作为一个集成电路制造商，可能仍在继续支持一些老旧产品线，这些产品在过去使用了PowerPC架构。为了保持向后兼容性和为现有客户提供支持，他们可能继续生产和销售这些旧型号的芯片。

2. **特定市场需求**：一些特定的行业或市场可能仍在依赖PowerPC架构，这可能是因为它们在特定场景下具有优势。例如，某些高性能计算、实时系统、以及安全性要求较高的领域可能更倾向于使用PowerPC架构的芯片。

3. **长期稳定性和可靠性**：对于某些嵌入式系统和长期稳定运行的应用，PowerPC架构的芯片可能已经被证明非常可靠。在这些场景下，客户可能不愿意轻易更换架构，因为这意味着可能需要进行大规模的软硬件迁移和重新验证。

虽然市场份额相对较小，但NXP仍然为一些特定的应用场景继续提供PowerPC架构的芯片，以满足客户的需求和维持现有生态系统的稳定性。然而，NXP也在其他产品线上推出了更多基于ARM架构的芯片，因为ARM在许多领域有着更广泛的应用和市场需求。

## nxp有哪些powerpc架构的芯片

截止到我最后更新知识的时候（2022年初），NXP曾推出过一些基于PowerPC架构的芯片。这些芯片在特定的应用场景和市场中发挥着重要作用。一些NXP的PowerPC系列芯片包括：

1. **QorIQ系列**：这是NXP旗下基于Power Architecture的处理器系列，旨在用于网络设备、工业控制、嵌入式系统等多个领域。其中一些常见的型号包括P10xxx、P20xxx、P30xxx等。

2. **T系列**：NXP的一些T系列处理器也采用了PowerPC架构，主要用于高性能计算和数据中心等领域。比如，T4240芯片是一款12核心的处理器，被用于高性能的网络和通信应用。

这些PowerPC架构的芯片通常针对高性能、多核心处理以及特定领域的需求。然而，随着时间的推移，NXP可能会更新产品线，增加基于其他架构（如ARM架构）的新型芯片，而有些旧型号可能会逐渐退出市场。最新的产品信息可能需要通过查阅NXP官方网站或者最新的资料来获取。

## 简单对比powerpc和arm架构

PowerPC和ARM架构都是用于嵌入式系统和高性能计算的处理器架构，它们有一些显著的区别和特点：

1. **指令集架构**：
   - PowerPC：PowerPC是一种复杂指令集计算机（CISC）架构，其指令集更为复杂，有更多的指令，用于处理更复杂的任务和数据。它通常用于高性能计算和实时系统。
   - ARM：ARM是一种精简指令集计算机（RISC）架构，其指令集更简单，更专注于执行简单的操作。ARM架构以其高效的能耗和性能比而闻名，广泛应用于移动设备和嵌入式系统。

2. **功耗和性能**：
   - PowerPC：在某些情况下，PowerPC架构可以提供更高的性能，特别是在大型服务器、网络设备和高性能计算方面。然而，通常情况下它的功耗相对较高。
   - ARM：ARM架构在功耗效率方面非常出色，因此在移动设备、物联网、嵌入式系统等领域占据主导地位。它的能耗较低，适合于需要长时间电池续航或低功耗的设备。

3. **应用领域**：
   - PowerPC：主要用于高性能计算、网络设备、实时系统等需要较高计算能力的领域。
   - ARM：主要用于移动设备、智能家居、汽车电子、嵌入式系统等对功耗和节能要求较高的领域。

4. **生态系统和支持**：
   - ARM：由于其在移动市场和嵌入式系统中的巨大成功，ARM生态系统非常庞大，拥有广泛的软件和硬件支持。
   - PowerPC：尽管PowerPC在某些特定领域有应用，但其生态系统规模相对较小，可能在软件支持和开发工具方面不及ARM成熟。

总体而言，两种架构各有优势，选择取决于特定应用的需求。PowerPC适合需要更高性能和复杂计算的场景，而ARM则在功耗效率和广泛应用上具有优势。





```
linux-qoriq_5.10.bb
	定义了kernel版本和代码地址，代码是从github上下载的。
	linux-qoriq.inc
```





```
do_merge_delta_config[depends] += "virtual/${TARGET_PREFIX}gcc:do_populate_sysroot bison-native:do_populate_sysroot"
do_merge_delta_config[dirs] = "${B}"
```

## powerpc架构

PowerPC 体系结构规范（PowerPC Architecture Specification）发布于 1993 年，

==它是一个 64 位规范 ( 也包含 32 位子集 )。==

几乎所有常规可用的 PowerPC（除了新型号 IBM RS/6000 和所有 IBM pSeries 高端服务器）都是 32 位的。

PowerPC 处理器有广泛的实现范围，

包括从诸如 Power4 那样的高端服务器 CPU 到嵌入式 CPU 市场（任天堂 Gamecube 使用了 PowerPC）。

PowerPC 处理器有非常强的嵌入式表现，

因为它具有优异的性能、较低的能量损耗以及较低的散热量。

除了象串行和以太网控制器那样的集成 I/O，该嵌入式处理器与“台式机”CPU 存在非常显著的区别。例如，4xx 系列 PowerPC 处理器缺乏浮点运算，并且还使用一个受软件控制的 TLB 进行内存管理，而不是象台式机芯片中那样采用反转页表。



# 参考资料

1、

https://www.cnblogs.com/053179hu/archive/2021/02/28/14458537.html