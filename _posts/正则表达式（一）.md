---
title: 正则表达式（一）
date: 2018-03-19 22:31:13
tags:
	- 正则表达式

---



一直没太把正则表达式弄清楚。现在开始写系列的文章进行学习梳理。写到会为止。

我的策略是以Python为切入口。

# 定义

什么是正则表达式？

英文叫Regular Expression。在代码里一般缩写为regex或者re。

正则表达式是对字符串进行操作的一种逻辑公式。

就是先定义好一些特定的字符，以及这些特定字符的组合，得到一个规则字符串。

然后用这个规则字符串对文本进行过滤处理。

# 发展历程

1、正则表达式的起源可以追溯到科学家对人类神经系统的早期研究。美国的两位神经生理学科学家，研究出了一种用数学方法来描述神经网络的新方法。

2、1951年，一个数学家，在前人工作的基础上，发表了一篇论文，引入了正则表达式的概念。

3、之后，人们发现可以把这个成果应用在其他的方面。Ken Thompson就把这个应用在搜索算法上。然后又引入到unix里的ed工具、grep工具里。

4、从此以后，正则表达式在unix里的各种工具里广泛应用。

5、现在正则表达式已经在计算机各个领域广泛应用。

# 应用场景

1、验证用户输入的合法性。

2、替换文本。

3、提取子字符串。



# 语法

构造正则表达式和创建数学表达式一样，就是用**元字符和运算符**把小的表达式组合在一起构建更大的表达式。

正则表达式由：

1、普通字符。

2、特殊字符，叫元字符。

这2种成分组成。

## 普通字符

没有显式地指定为元字符的，都是普通字符。

除了可以打印字符，还有这些不可打印的字符。

| 字符   | 描述                                       |
| ---- | ---------------------------------------- |
| \cx  | \c表示的是ctrl的意思。\cM，就是Ctrl+M的意思。x的取值只能是A到Z这些字母（包括小写） |
| \f   | 换页符。                                     |
| \n   | 换行符                                      |
| \r   | 回车符                                      |
| \s   | 空格符                                      |
| \S   | 任何空白符。等价于\f\n\r\t\v                      |
| \t   | tab制表符                                   |
| \v   | 垂直制表符                                    |

## 特殊字符

| 字符   | 描述                                |
| ---- | --------------------------------- |
| $    | 字符串末尾                             |
| ()   | 标记一个子表达式的开始和结束位置。                 |
| *    | 匹配前面的子表达式0次或者多次。**贪婪的。尽量多匹配。**    |
| +    | 匹配1次或多次。**贪婪的。尽量多匹配。**            |
| .    | 匹配\n之外的任何单字符。                     |
| [    | 标记一个中括号表达式的开始。                    |
| ?    | 匹配前面的子表达式0次或者1次。**可以把其他的变为非贪婪的**。 |
| \    | 转义                                |
| ^    | 字符串开头。                            |
| {    | **标记限定符的开始**。                     |
| \|   | 二选一。                              |

## 限定符

上面说大括号是用来标记限定符的。那么什么是限定符？

限定符用来指定一个给定组件必须要出现多少次才能满足要求。

一共有6种情况。

| 字符    | 描述                                       |
| ----- | ---------------------------------------- |
| *     | 匹配前面的子表达式0次或多次。例如，zo*可以匹配“z”和“zoo”。等价于{0,} |
| +     | 匹配1次或多次。例如，zo+可以匹配“zoo”，但是不能匹配“z”。等价于{1,} |
| ?     | 匹配0次或1次。例如，do(es)?可以匹配“do”、“does”、”doxy“。等价于{0,1} |
| {n}   | n是非负整数。匹配n次。例如"o{2}"可以匹配”food“，但是不能匹配”bob“。 |
| {n,}  | 至少匹配n次。                                  |
| {n,m} | 最少匹配n次，最多m次。                             |

## 运算符优先级

基本原则：

从左到右计算。跟算术表达式规格类似。

运算符的优先级表如下：

从高到低。

| 运算符             | 描述                                       |
| --------------- | ---------------------------------------- |
| \               | 转义。最高优先级                                 |
| (),(?:),(?=),[] | 小括号和中括号。                                 |
|                 | 6种限定符。                                   |
| ^ , $           | 定位点和序列。                                  |
| \|              | 这个优先级最低了。如果m\|food匹配的是m和food，要匹配mood和food，应该(m\|f)ood |

## 匹配规则

我们从简单的开始讲起。

先看^和$这两个。

要精确匹配，就这样`^book$`。这样就只匹配一行上面就是book这一个单词的情况。

要看是否以tab开头。

```
^\t
```

在网页上验证用户的输入合法性的时候。

用普通的基于字面的字符的不够用的。

所有要引入一种更加自由的描述我们要的模式的方法。这就是字符簇。字符簇是用中括号来表示的。

例如，这个表示所有的元音字母。

```
[aeiouAEIOU]
```

可以使用连字符。

```
[a-z]
[0-9]
[a-zA-z]
[ \f\n\r\t] 匹配所有的空白字符。
```

一个字符簇的作用是一个字符。

另外，要注意的是，^在方括号里面的含义变了。变成了非的含义。用来排除某个字符。

```
^[^0-9][0-9]$
```

这个与a1是匹配的。但是与11不匹配，因为前面一个就是排除了0到9的字符。



# 正则表达式中\A，\z和^的区别

^从行开始处匹配，$从行结束处开始匹配。 \A从字符串开始处匹配



# 参考资料

1、

https://baike.baidu.com/item/正则表达式/1700215?fr=aladdin

2、

http://www.runoob.com/regexp/regexp-tutorial.html

3、正则表达式中\A，\z和^的区别

https://zhidao.baidu.com/question/1436194642135358139.html

