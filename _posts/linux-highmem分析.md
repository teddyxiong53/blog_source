---
title: linux highmem分析
date: 2016-11-04 21:53:53
tags:
	- linux
---
1

highmem，根本原因是32位的地址空间不够大。

对于64位机器，就不存在highmem问题了。



linux划分虚拟内存对于x86一般按照3:1的比例来划分，3GB用于用户空间，1GB用于内核空间。而ARM架构的虚拟空间是可以配置的（1:3或2:2或3:1）。

以x86为例，linux使用0xc0000000这个地址开始是1GB的线性地址，也就是只有1GB的地址空间来映射物理地址空间。

**当系统的实际物理内存大于1GB的时候，内核态线性地址就不够用了。**

因此引入了一个高端内存的概念。
把1GB的线性地址空间划分为两部分：

* 小于896M的物理地址空间成为低端内存，这部分的物理地址和3G开始的线性地址是一一对应的。
* 896M到1G之间的128M用来映射剩下的物理内存。这部分就是高端内存区。这部分需要MMU通过TLB来建立动态的映射关系。

高端内存映射的方式有3种：
1. 临时映射空间
2. 长久映射空间
3. 非连续映射空间



参考资料

1、Linux 内存管理之highmem简介

https://blog.csdn.net/laoyouji/article/details/7965127

2、linux服务器lowmem不足引起系统崩溃的解决

https://blog.csdn.net/i3myself/article/details/8663801