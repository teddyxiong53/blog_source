---
title: Linux之i2c设备调试工具
date: 2021-12-24 15:57:11
tags:
	- Linux

---

--

i2c-tools工具是一个专门调试i2c的，开源，可获取挂载的设备及设备地址，还可以在对应的设备指定寄存器设置值或者获取值等功能。



# i2cdetect

这个看帮助信息就可以摸索出用法。

查看系统有几个i2c总线

```
# i2cdetect -l
i2c-1   i2c             Meson I2C adapter                       I2C adapter
i2c-0   i2c             Meson I2C adapter                       I2C adapter
```

查看i2c-0上挂了什么i2c设备

```
i2cdetect -r -y 0
```

-r表示使用smbus read byte命令来进行设备探测。

-y就是不要打印东西让我确认，不用交互模式。

最后的0表示i2c-0。

打印是这样的

```
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- -- -- 
10: -- -- -- -- -- -- -- -- -- UU -- -- -- -- -- -- 
20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
40: -- -- -- -- -- -- -- -- UU UU UU UU -- -- -- -- 
50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
70: -- -- -- -- -- -- -- --    
```

这个表示在0x19,0x48到0x4b 这5个地址上有设备。

# i2cdump

用i2cdump查看器件所有寄存器的值，这个很有用，输入

```
i2cdump -f -y 0 0x19
```

我当前读取到全部是XX。

应该没有实际接上这个芯片导致的。

这个可以读取到。

```
i2cdump -f -y 1 0x40
```

# i2cget/i2cset

单个寄存器读写。

```
i2cget  -f -y 2 0x40 0xc3
```



参考资料

1、i2c-tools使用及调试

https://blog.csdn.net/kai_zone/article/details/80491706