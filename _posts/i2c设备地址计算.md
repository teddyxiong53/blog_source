---
title: i2c设备地址计算
date: 2018-04-06 10:18:40
tags:
	- i2c

---



i2c的设备地址，由2个因素共同决定：

1、硬件引脚的电平。

2、芯片手册里的描述。



AT240C2的设备地址是这样的：

```
01010 [A2][A1][A0]
```

高5位固定为01010 。低3位由A2/A1/A0这3个引脚的电平决定。



准确来说，高4位是固定的，是根据设备类型确定的。

低3位是芯片地址，也就决定了一个系统里，同一个类型的i2c芯片，最多有8个。



我们如果把3个引脚都接地，那么就是0x50，我们叫addr_hw 。

然后地址不是直接用的，还要经过运算。

上面这些决定的是高7位的地址，bit0的是由操作类型来决定。1是的读，0是写。

addr_real = (addr_hw << 1) | (r/w)

所以读地址就是0xa1，写地址就是0xa0 。

# 10位地址

任何IIC设备都有一个7位地址，

理论上，现实中只能有127种不同的IIC设备。

实际上，已有IIC的设备种类远远多于这个限制，

在一条总线上出现相同的地址的IIC设备的概率相当高。

为了突破这个限制，

很多设备使用了双重地址——7位地址加引脚地址（external configuration pins）。

IIC 标准也预知了这种限制，提出10位的地址方案。



**10位的地址方案对 IIC协议的影响有两点：**

- 第一，地址帧为两个字节长，原来的是一个字节；
- 第二，第一个字节前五位最高有效位用作10位地址标识，约定是“11110”。



参考资料

1、I2C设备地址（7位地址左移）

https://blog.csdn.net/chengyuanJJ/article/details/75258005

2、

https://zhuanlan.zhihu.com/p/63879154