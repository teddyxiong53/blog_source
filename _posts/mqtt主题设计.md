---
title: mqtt主题设计
date: 2022-08-14 14:31:08
tags:
	- mqtt

---

--

我现在打算用mqtt来做系统消息总线，那么就需要一个比较合理完备的topic设计。

使用MQTT时的首要考虑因素之一是MQTT主题的设计策略。 

MQTT主题必须平衡当前的设备通信，云端操作和将来的设备功能。

因此，设计一个理想的MQTT主题结构可能会具有挑战性，该主题尽可能小的采用特权通讯，并且足够灵活扩展。

一些设计原则

1、只用小写字母、数字和中划线。不用驼峰。

2、topic从左到右，依次是从通用到特定。

例如，一个空调系统（名为hvac719）与名为hv100的IoT平台相关联，位于建筑物bld1518的地下室（basement）。主题结构以以通用组（在这种情况下为IoT平台的名称）开头，以最具体的身份（物的名称）结尾。本示例创建以下主题级别的结构：

```
v100/bld1518/basement/havc719
通用---->具体
```

3、topic中要包含完整的相关路由信息。

4、将mqtt topic结构文档化。



参考资料

1、MQTT主题设计最佳实践

https://blog.digiinfr.com/mqtt%E4%B8%BB%E9%A2%98%E8%AE%BE%E8%AE%A1%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/