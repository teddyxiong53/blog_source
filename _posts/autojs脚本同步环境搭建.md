---
title: autojs脚本同步环境搭建
date: 2020-12-18 13:54:30
tags:
- 自动化
---

1

# 结论

微力不可用。不符合我的需求。

总是导致权限问题无法解决。

最后选择resilio sync。这个很简单易用。

符合我的需求。

还是商业软件省心靠谱。

 但是我的坚果pro2同步居然不行。

没有网速。其他的应用有网速，估计是rom的问题。

算了。手动拷贝吧。

最后的开发测试流程就这样：

LG G7作为测试机器，来保证脚本都是正常的。

然后还是通过ftp拷贝到坚果上。







现在的环境是：

主路由

旁路由：openwrt

电脑：开发脚本。接入主路由。

手机：2台，都接入到主路由。

希望达到的效果：

局域网内，我在电脑上修改脚本，改好后，上传到指定目录，然后手机可以无感自动同步改动后的文件。

这样就可以免去总是在手机和电脑直接拷贝文件的麻烦。



# 工具

我看我的旁路由的openwrt里，已经带了一个叫微力同步的插件。

查了一下相关的信息。觉得比较符合我的要求。



# 操作步骤

## 旁路由

开启微力插件。跳转到设置界面，新建一个名字为“脚本”的目录。

在`/root/脚本`目录下。旁路由的目录，通过samba共享出来，脚本修改后，用beyondcompare对比合并过来。

配置完成。

### 问题解决

后面实际操作的过程中，发现这些问题：

1、samba无法写入文件。ftp可以写入。

2、文件名在经过网络拷贝后，中英文混合的名字，乱码了。

解决方法：

1、修改权限。文件权限755，文件夹权限644，改了后好了。

2、统一用拼音来命名最外面的文件。

还是不行，我决定把同步由电脑端来做了。

电脑端安装微力软件。



也是一样。

是微力导致了权限问题。

把我的目录搞成只读，算了，我还是在openwrt上折腾，只是删除只读目录还容易点。





## 手机

到官网下载安装apk文件。

然后扫描旁路由管理界面上微力同步的二维码。

就可以得到分享目录。

这里有个小问题，就是目录被固定到`/storage/emulated/0/Download/VerySync/脚本`。

而autojs的默认目录是`/sdcard/脚本`。

微力的不能改目录。

而autosjs的可以改。

那么就改autojs到：`/Download/VerySync/脚本`。需要是这个值。

不要写成：`/storage/emulated/0/Download/VerySync/脚本`

这样反而不行。

另外，微力手机app，可以进网页管理界面，关闭“选择性同步”。

这个选择性同步，如果打开，那么只有你访问文件的时候，才进行同步，这不是我想要的效果。



# syncthing实验

openwrt里除了微力，还有这个插件。

看起来差不多。试一下。

这个是开源的。

http://192.168.1.2:8384/

这个和微力基本是一样的。

软件界面什么的都很像。

估计是国内的抄的国外的。

问题都是一样的。

