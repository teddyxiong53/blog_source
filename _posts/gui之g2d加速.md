---
title: gui之g2d加速
date: 2021-05-28 15:03:11
tags:
	- gui

---

--

2D 加速，是早就有的产物了。

它的作用是用 显示芯片 来代替 CPU，

整块整块的移动显存里的数据。

比如，你要移动一个窗口，在没有 2D 加速的时代，CPU 所作的工作：

1、找到窗口在显存中的地址，

2、把一行数据拷贝到目的地址，

3、重复 2 直到拷贝完所有的行。

完成。

这样一来，当窗口很大的时候，CPU 要处理的数据量就会成倍的增长，导致窗口的移动比蜗牛爬还慢…. 想体验一下吗？

好，进入设备管理器，把你的显卡驱动删掉，然后重起…. 好好享受啊！呵呵 

有了 2D 加速呢，CPU 所做的事，减轻了很多，

不过还是要指导 显示芯片 来干这搬运工的活。

CPU 的工作：

1、找到窗口在显存中的地址，

2、给 显卡发送 “拷贝这一行到目的地”的命令。

3、重复 2 直到拷贝完所有的行。

初看起来好像和没有加速以前差不多，可是第 2 步就是关键所在哦。 

现在让我们把第二步分解来看：

没有 2D 加速：

1、读 32 Bit 数据(入门篇里的哦！)，把这 32 Bit 数据写入目的地。

2、重复 1 直到一行所有的像素被处理完。

而有了 2D 加速后的工作只有：1、发送命令让显卡去拷贝这一行。

**这样看来，2D 加速确实能很大程度的释放 CPU 的负担。**

所以大家现在随便提起一个窗口移动一下，很平滑不是吗？显卡负责了窗口的移动。



以上只举了一个2d可以代替CPU作数据搬运操作的功能，这个有点类似DMA，DMA大家总会知道吧。

也就是CPU可以把一些工作扔给G2D模块，减轻自己的负担，从而可以空中更多的时间去做其它事情。

当然，G2D实现的功能不仅是搬运（也就是把要显示的数据搬到framebuffer），

例如三星的CPU的G2D可以把多张图像根据特定的条件设定合成一张图像，

可以帮一张空的图像填充颜色（术语为solid），设置透明度，另外还有裁剪、缩放等功能。


参考资料

https://blog.csdn.net/chris___mo/article/details/7617981