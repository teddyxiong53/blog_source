---
title: Linux内核之timer使用
date: 2022-04-24 15:58:01
tags:

	- Linux内核

---

--

```
结构体
struct timer_list
使用接口：
add_timer
mod_timer
del_timer

```

低分辨率定时器是基于HZ来实现的，

也就是说，每个tick周期，都有可能有定时器到期，

系统中有可能有成百上千个定时器，

难道在每个tick中断中遍历一下所有的定时器，检查它们是否到期？

内核当然不会使用这么笨的办法，

它使用了一个更聪明的办法：

按定时器的到期时间对定时器进行分组。

因为目前的多核处理器使用越来越广泛，

连智能手机的处理器动不动就是4核心，

内核对多核处理器有较好的支持，

低分辨率定时器在实现时也充分地考虑了多核处理器的支持和优化。

为了较好地利用cache line，也为了避免cpu之间的互锁，

内核为多核处理器中的每个cpu单独分配了管理定时器的相关数据结构和资源，

**每个cpu独立地管理属于自己的定时器。**



参考资料

1、

https://blog.csdn.net/wll1228/article/details/107546023