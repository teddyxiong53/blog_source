---
title: Linux之五种io模型
date: 2019-03-20 15:45:32
tags:
	- Linux

---



网络io处理的问题无非两类：

1、网络io。

2、数据计算。

网络io一般是瓶颈。

网络io的模型有下面这些：

```
1、同步io。
2、阻塞io。
3、非阻塞io。
4、多路复用io。
5、信号驱动io。
6、异步io。
```

信号驱动io不常用。

剩下的几种，可以放到一个象限空间里来看。

|      | 阻塞       | 非阻塞                     |
| ---- | ---------- | -------------------------- |
| 同步 | read/write | fd为O_NONBLOCK的read/write |
| 异步 | 多路复用   | aio                        |



我们还是用一个比喻来帮助理解。

```
我和女友点完餐之后，不知道饭菜什么时候可以端上来。
只好坐在餐厅里等。
直到做好了，端上来，我们吃了才能离开。
本来还打算逛街的，但是现在必须等到吃完饭才能去了。
等的这个过程，就是典型的阻塞。
```



# 同步阻塞

这个是最简单的模型，也很常用。

很符合人的直观思维。

优点：

```
1、及时返回数据。
2、对于内核开发者简单省事。
```

缺点：

```
1、用户程序就要付出等待的代价了。
```



# 同步非阻塞

```
我们不甘心在这里一直等着。
所以我们去逛商场，过一会回来问一下服务员饭菜好了没。
这个就是同步非阻塞。也很浪费精力的。
```



# io多路复用

```
我们不甘心在这里一直等着。
所以我们去逛商场。
但是餐厅安装了电子屏幕来显示点餐状态。
我们过了看一下屏幕就好了，不用问服务员。
```

这是异步阻塞，阻塞在select和poll上。没有阻塞在recvfrom上。



# aio

```
这个就是让餐厅把外卖送到家里来了。
```

这个其实当前支持不太好。





参考资料

1、聊聊Linux 五种IO模型

https://www.jianshu.com/p/486b0965c296