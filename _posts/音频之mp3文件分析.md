---
title: 音频之mp3文件分析
date: 2019-06-04 15:53:51
tags:
	- 音频

---

--

# 基本信息

MPEG（运动图像专家组）制定了一系列视频和音频编码标准，这些标准在多媒体领域具有重要影响。以下是主要的MPEG标准及其关系的概述：

### MPEG标准概览

1. **MPEG-1**
   - 主要用于视频和音频压缩，适合于CD音质和VCD。
   - 包括：
     - MP1（Layer 1音频）
     - MP2（Layer 2音频）
     - MP3（Layer 3音频）

2. **MPEG-2**
   - 提供更高质量的视频和音频，广泛用于DVD和数字广播。
   - 包括：
     - MPEG-2 Video
     - MPEG-2 Audio
     - 支持多种音频格式，包括MP3和AAC。

3. **MPEG-3**
   - 原本计划用于高质量视频，但很快被MPEG-4取代，MPEG-3并未广泛应用。

4. **MPEG-4**
   - 作为一个多媒体容器格式，支持视频、音频、字幕、交互等多种媒体。
   - 包括：
     - MP4（容器格式，支持多种编码）
     - AAC（高级音频编码）
     - H.264（视频编码）
     - H.265（HEVC，视频编码）

5. **MPEG-7**
   - 提供多媒体内容描述的标准，用于内容检索和管理。
   - 专注于如何描述音频和视频内容，而不是编码。

6. **MPEG-21**
   - 旨在定义数字内容的框架，关注内容的流通和交互。
   - 提供了数字内容的标准化和互操作性。

### 标准之间的关系

```
MPEG标准
├── MPEG-1
│   ├── MP1 (Layer 1)
│   ├── MP2 (Layer 2)
│   └── MP3 (Layer 3)
├── MPEG-2
│   ├── MPEG-2 Video
│   └── MPEG-2 Audio
├── MPEG-3 (未广泛应用)
├── MPEG-4
│   ├── MP4 (容器格式)
│   ├── AAC (音频编码)
│   ├── H.264 (视频编码)
│   └── H.265 (HEVC)
├── MPEG-7 (内容描述)
└── MPEG-21 (数字内容框架)
```

### 总结
- MPEG标准涵盖从音频、视频编码到多媒体内容描述的多个方面。
- 各标准之间相互关联，形成了一个丰富的多媒体技术生态。MPEG-1和MPEG-2主要聚焦于音视频编码，而MPEG-4及其后续标准则扩展到了多媒体容器和内容描述等领域。

```
MPEG标准
├── MPEG-1
│   ├── MP1 (Layer 1)
│   ├── MP2 (Layer 2)
│   └── MP3 (Layer 3)
├── MPEG-2
│   └── 更高质量视频和音频
└── MPEG-4
    ├── MP4 (容器格式)
    │   ├── 可包含视频（如H.264）
    │   ├── 可包含音频（如AAC或MP3）
    │   └── 支持字幕等其他媒体
    └── 其他相关标准和特性
```



MP3是利用人耳对高频声音信号不敏感的特性，

**将时域波形信号转换成频域信号，**

**并划分成多个频段，**

**对不同的频段使用不同的压缩率，**

对高频加大压缩比（甚至忽略信号）对低频信号使用小压缩比，保证信号不失真。

这样一来就相当于**抛弃人耳基本听不到的高频声音，**

只保留能听到的低频部分，从而将声音用1∶10甚至1∶12的压缩率压缩。

由于这种压缩方式的全称叫MPEG Audio Player3，所以人们把它简称为MP3。

最高参数的MP3(320Kbps)的音质较之CD的,FLAC和APE无损压缩格式的差别不多，其优点是压缩后占用空间小，适用于移动设备的存储和使用。



mp3全称是MPEG Audio Layer 3。

是一种高效的音频编码方案。

还有mp1、mp2这2种方案。

```
MP3全称是MPEG1 Audio layer 3。
MPEG是运动图片专家组的缩写。
音频相关的标准有：
	MPEG-1
	MPEG-2
		MPGE-1和MPEG-2使用同一组音频编码解码族：layer1、layer2、layer3
		1、2、3这些数字，是根据压缩质量和编码复杂程度来命名的。
		分别对应mp1、mp2、mp3这3种文件。MP3的压缩率最高，也最复杂。
		采样率一般为：32K、44.1K、48K。
		我们重点看layer3，前面两种不怎么用的。
		mp3的设计码率在128kbps左右。压缩比在10:1左右。
		常用的编码器是LAME，它完全遵循LGPL的MP3编码器，有着良好的速度和音质。
	MPEG-2 AAC
	MPEG-4
```



mp3采用了**感知音频编码**这种有损编码方式。

去掉了大量的冗余信号和无关信号。

mp3文件由多个帧组成。

帧是mp3文件的最小组成单位。



每帧包括：

1、帧头。记录了码率、采样率、crc、

2、附加数据。

3、声音数据。

每帧的播放时长是0.026秒。（为什么是这么长？下面有解释）

mp3文件的组成

```
1、ID3V2。可以没有。
	位于文件首部。长度不固定。包含作者等信息。
	是对ID3V1的扩展。
	组成：
		1、一个标签头。
			10个字节。
		2、若干个标签帧。
			每个标签帧都有10字节的帧头。
2、音频帧数据。
	帧头是4个字节。
	组成：
		1、帧头。4字节。必须有。
		2、CRC。2字节，可以没有。
		3、通道信息。32字节。必须有。
		4、声音数据。长度不固定。必须有。
3、ID3V1
```

ID3V2有4个版本：

2.1

2.2

2.3：最流行的是这个版本。

2.4

mp3 每帧均为1152个字节， 则：

frame_duration = 1152 * 1000000 / sample_rate

例如：sample_rate = 44100HZ时， 计算出的时长为26.122ms，这就是经常听到的mp3每帧播放时间固定为26ms的由来。



找一些mp3分析工具。

https://en.softonic.com/download/mp3-frame-editor/windows/post-download

看看这个怎么样。

不行，不支持mpeg2 。



一帧的采样个数是576个。就是1152字节。

这个是对于MPEG2、level3的。是这个数。

我用百度语音合成的16k采样率的文件，看帧头是：

```
FFF3 28C4
```

每一帧是68字节。

这个68是怎么来的？是1152字节压缩得到的吗？



比如常见mp3为[MPEG-1](https://www.baidu.com/s?wd=MPEG-1&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao) Layer III，而这个规格的采样个数固定为1152（下面公式已经化简过了）。



这个是mp3解码库。

https://github.com/lieff/minimp3



**时域和频域是信号的基本性质**，这样可以**用多种方式来分析信号**，每种方式提供了不同的角度。

解决问题的最快方式不一定是最明显的方式，**用来分析信号的不同角度称为域**。时域频域可清楚反应信号与互连线之间的相互影响。





https://github.com/toots/shine

https://github.com/cpuimage/tinymp3

# 这些标准的文本在哪里？有没有解读的文章？

关于MPEG标准的正式文本和解读，您可以通过以下渠道找到相关资料：

### 1. 官方标准文本
- **ISO/IEC 11172 (MPEG-1)**：可以在国际标准化组织（ISO）或国际电工委员会（IEC）的网站上找到。
- **ISO/IEC 13818 (MPEG-2)**：同样可以在ISO或IEC网站上获取。
- **ISO/IEC 14496 (MPEG-4)**：涵盖MPEG-4的多个部分，详细信息可在ISO网站上获取。
- **ISO/IEC 15938 (MPEG-7)** 和 **ISO/IEC 21000 (MPEG-21)**：可以在ISO网站上找到。

### 2. 解读和参考文章
- **学术论文和研究文章**：许多研究机构和大学会发布关于MPEG标准的解读和应用研究，您可以通过Google Scholar、ResearchGate等学术搜索引擎查找相关论文。
- **技术博客和网站**：
  - **IEEE Xplore**：提供关于音视频编码的技术文章。
  - **Codec Guide**：介绍各种音视频编码标准的比较和解读。
  - **VideoLAN**：如VLC的官方网站，提供关于多媒体标准的相关信息。

### 3. 在线课程和讲座
- **Coursera、edX**等平台上可能有多媒体编码和传输的课程，通常会涉及MPEG标准的内容。

### 4. 教科书
- **《数字视频和音频编码》**：许多大学教材详细讲解了音视频编码标准。
- **《编解码器的设计与实现》**：介绍了各种编码标准的原理和实践。

如果您需要具体的文章或文献推荐，请告诉我，我可以帮助您查找更多信息！

# MPEG-2标准文档

https://download.tek.com/document/25C-11418-7_0.pdf

http://wikil.lwwhome.cn:28080/?p=245

# MPEG-2标准内容概括

MPEG-2标准是一个用于音频和视频压缩的国际标准，主要用于数字视频广播和DVD等应用。以下是MPEG-2标准的主要内容和关键特性概括：

### MPEG-2标准概述

1. **标准编号**：
   - **ISO/IEC 13818**，包括多个部分。

2. **主要目标**：
   - 提供高质量的音视频压缩，支持不同的比特率和分辨率，适应广泛的广播和存储需求。

3. **关键组成部分**：
   - **视频编码**：
     - 支持多种视频分辨率，包括标清和高清。
     - 使用宏块（macroblocks）和运动补偿技术，以提高压缩效率。
   - **音频编码**：
     - 支持多种音频格式，如MPEG-1 Layer II。
     - 提供多声道音频支持，适应家庭影院和广播需求。
   - **系统层**：
     - 定义音视频同步、数据流格式和传输协议，以确保音视频内容的有效传输和播放。

4. **应用领域**：
   - **数字电视广播**：广泛应用于卫星、地面和有线电视广播。
   - **DVD视频**：成为DVD光盘的主要视频和音频编码标准。
   - **视频会议**：用于实时视频传输。

5. **兼容性**：
   - 向下兼容MPEG-1，允许使用MPEG-1的设备播放MPEG-2内容。

6. **特性**：
   - **灵活性**：支持多种比特率和分辨率的设置，适应不同的传输媒体和网络条件。
   - **错误恢复**：设计了错误恢复机制，提高在不稳定网络中的传输质量。

### 总结
MPEG-2是一种广泛应用于数字视频和音频压缩的标准，提供高质量的音视频体验，适用于广播、存储和实时传输等多种场景。其设计的灵活性和兼容性使其成为数字媒体领域的重要基础。

# MP3编码原理及实现

量化和量化器：

量化是把离散时间上的连续信号，转化成离散时间上的离散信号。

常见的量化器有：

均匀量化器，对数量化器，非均匀量化器。

量化过程追求的目标是：最小化量化误差，并尽量减低量化器的复杂度（这2者本身就是一个矛盾）。

（a）均匀量化器：最简单，性能最差，仅适应于电话语音。

（b）对数量化器：比均匀量化器复杂，也容易实现，性能比均匀量化器好。

（c）Non-uniform量化器：根据信号的分布情况，来设计量化器。信号密集的地方进行细致的量化，稀疏的地方进行粗略量化。

```
语音编码器
	（1）波形编码器。
		以构造出包含背景噪声的波形为目标。
		质量高，但是代价大。
	（2）声码器。vocoder。
		不会产生原始波形。提取参数。
	（3）混合编码器。
		混合波形编码器和声码器的特点。
		
波形编码器
	设计跟具体的信号无关。
	适用于各种声音，不限于语音。
	
波形编码器分类
	（1）时域编码。
		1）PCM。
		2）DPCM。
			差分脉冲编码，对于差异部分进行编码。
		3）ADPCM。
			A表示自适应。
	（2）频域编码。
		频域编码是指把信号分解为一系列不同的元素。进行独立编码。
		1）子带编码。
			最简单的频域编码。把原始信号从时域转成频域，然后分割为多个子频带。
			是通过带通滤波器进行分组。
			人耳对不同的频率敏感度不同。
		2）DCT编码。
		
```





MP3音频压缩包含编码和解码两个部分。

编码是将WAV文件中的数据转换成高压缩率的**位流形式**，

解码是接受位流并将其重建到WAV文件中。

MP3采用了感知音频编码（Perceptual AudioCoding）这一失真算法。

人耳感受声音的频率范围是20Hz-20kHz，

MP3截掉了大量的冗余信号和无关的信号，

编码器通过混合滤波器组将原始声音变换到频率域，

利用心理声学模型，

估算刚好能被察觉到的噪声水平，

再经过量化，转换成Huffman编码，

形成MP3位流。

解码器要简单得多，它的任务是从编码后的谱线成分中，经过反量化和逆变换，提取出声音信号。

MP3的解码总体上可分为9个过程：

比特流分析，霍夫曼编码，逆量化处理，立体声处理，频谱重排列，抗锯齿处理，IMDCT变换，子带合成，PCM输出。



https://blog.csdn.net/android_jiangjun/article/details/46624047

https://blog.csdn.net/xiaoxiaoyeyaya/article/details/50445638

# 参考资料

1、

https://blog.csdn.net/qingkongyeyue/article/details/70984891

2、MP3文件结构解析(超详细)

https://blog.csdn.net/u010650845/article/details/53520426

3、计算音频帧的播放时间(音频码流 音频帧)

https://blog.csdn.net/weiyuefei/article/details/74333499

4、

https://www.jianshu.com/p/c3f8be205e3f

5、Mp3帧分析（数据帧）

https://blog.csdn.net/qq_24004499/article/details/79584495

6、

https://blog.csdn.net/zhenglie110/article/details/78654410

7、mp3

https://baike.baidu.com/item/mp3/23904

8、时域频域

https://baike.baidu.com/item/%E6%97%B6%E5%9F%9F%E9%A2%91%E5%9F%9F/9399325#2

9、MP3 编码解码 附完整c代码

https://www.cnblogs.com/cpuimage/p/9427457.html

