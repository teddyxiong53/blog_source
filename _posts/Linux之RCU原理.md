---
title: Linux之RCU原理
date: 2018-03-08 17:09:47
tags:
	- Linux

---



RCU是读拷贝更新的缩写。是一种数据同步的方式。在当前的linux内核中发挥着重要的主要。

RCU主要是针对链表。目的是提高遍历的速度。

允许同一时刻有多个线程读取链表，但是只能由一个线程修改链表。

使用场合：需要频繁读取的情况。而且修改不多。例如文件系统里。是RCU发挥作用的最佳场所。

RCU的作者是Paul E. McKenny。他把RCU的文档整理放在这里：http://www2.rdrop.com/users/paulmck/RCU/



在RCU的实现过程中，主要解决以下问题：

1、在读取过程中，另外一个线程删除了一个节点。删除线程可以把这个node从list里remove掉，但是不能destroy，必须等到所有的读取线程读取完成后，才能进行destroy。这个时间间隔叫做宽限期。

2、在读取过程中，另外一个线程插入了一个节点，而读取线程读到了这个节点，那么需要保证读到的这个节点是完整的。这个涉及到发布订阅机制。

3、保证链表读取的完整性。新增或者删掉节点，不至于让链表从中间断开。



# 参考文章

1、linux内核 RCU机制详解

http://blog.csdn.net/xabc3000/article/details/15335131

