---
title: 二维码（1）
date: 2021-01-21 17:27:11
tags:
	- js

---

--

怎样生成一个二维码？



二维码又称二维条码，常见的二维码为QR Code，QR全称Quick Response，

是一个近几年来移动设备上超流行的一种编码方式，

它比传统的Bar Code条形码能存更多的信息，也能表示更多的数据类型。



是用某种特定的几何图形按一定规律在平面（二维方向上）分布的、黑白相间的、记录数据符号信息的图形；

在代码编制上巧妙地利用构成计算机内部逻辑基础的“0”、“1”比特流的概念，

使用若干个与二进制相对应的几何形体来表示文字数值信息，

通过图象输入设备或光电扫描设备自动识读以实现信息自动处理：

它具有条码技术的一些共性：

每种码制有其特定的字符集；

每个字符占有一定的宽度；

具有一定的校验功能等。

同时还具有对不同行的信息自动识别功能、及处理图形旋转变化点。



国外对二维码技术的研究始于20世纪80年代末，

在二维码符号表示技术研究方面已研制出多种码制，

常见的有PDF417、QR Code、Code 49、Code 16K、Code One等。

中国对二维码技术的研究开始于1993年。



二维条形码能够在横向和纵向两个方位同时表达信息，因此能在很小的面积内表达大量的信息。



能表示更多的数据类型：比如：字符，数字，日文，中文等等。



首先，我们先说一下二维码一共有 40 个尺寸。

官方叫版本 Version。

Version 1 是 21 x 21 的矩阵，

Version 2 是 25 x 25 的矩阵，

Version 3 是 29 的尺寸，

每增加一个 version，就会增加 4 的尺寸，

公式是：(V-1)*4 + 21（V是版本号） 最高 Version 40，(40-1)*4+21 = 177，

所以最高是 177 x 177 的正方形。



QR码是日本国产的二维码，因此非常适合处理日文字母和汉字。

QR码字集规格定义是按照日本标准“JIS第一级和第二级的汉字”制定的，

因此在日语处理方面，每一个全角字母和汉字都用13比特的数据处理，效率较高，

与其他二维码相比，可以多存储20%以上的信息。



对变脏和破损的适应能力强

QR码具备“纠错功能”，即使部分编码变脏或破损，也可以恢复数据。

数据恢复以码字为单位（是组成内部数据的单位，在QR码的情况下，每8比特代表1码字），最多可以纠错约30%（根据变脏和破损程度的不同，也存在无法恢复的情况）。

可以从任意方向读取

QR码从360°任一方向均可快速读取。其奥秘就在于QR码中的3处定位图案，可以帮助QR码不受背景样式的影响，实现快速稳定的读取。

![image-20210121173757985](https://gitee.com/teddyxiong53/playopenwrt_pic/raw/master/image-20210121173757985.png)

![](https://gitee.com/teddyxiong53/playopenwrt_pic/raw/master/20161126233946256)





# QR码的编码过程

下面是简要QR编码过程：

1.数据分析：确定编码的字符类型，按相应的字符集转换成符号字符； 选择纠错等级，在规格一定的条件下，纠错等级越高其真实数据的容量越小。

2.数据编码：将数据字符转换为位流，每8位一个码字，整体构成一个数据的码字序列。其实知道这个数据码字序列就知道了二维码的数据内容。



容量如下：

| 格式              | 容量                          |
| ----------------- | ----------------------------- |
| 数字              | 最多7089字符                  |
| 字母              | 最多4296字符                  |
| 二进制数（8 bit） | 最多2953字节                  |
| 日文汉字/片假名   | 最多1817字符（采用Shift JIS） |
| 中文汉字          | 最多984字符（采用UTF-8）      |
| 中文汉字          | 最多1800字符（采用BIG5）      |

# 专利

“想让更多人使用QR码”，秉承这一理念，DENSO WAVE全面公开了QR码的相关标准。

目前，QR码已经在国家标准和国际标准中实现标准化，任何人都可以随意查看该标准。

※DENSO WAVE INCORPORATED已宣布，不行使本公司就标准QR码拥有的专利权(专利第2938338号)。



# 容量

二维码的最大容量取决于主流扫码设备的分辨能力。

有人尝试把一部1.9M的小说放进二维码，但是没有成功。



二维码能否扫描会受到图案完整度、图案复杂度、颜色对比度、扫描距离、环境光线、扫描设备分辨率等因素的影响。

常用扫描设备（如手机、扫码枪等）都**能快速识别**的**二维码内容长度为150字以内**，

且有一定范围的容错率，二维码图案即使被遮挡了一小部分，也可以正常扫描。



借助短网址服务，很长的网址也没有问题的。

在互联二维码中生成的二维码，默认容错率为30%，

如果需要生成的二维码内容超过150字，

并且需要打印后使用扫码枪/PDA/特殊设备/特殊软件等进行扫描，

**建议在生成二维码前设置调低容错率，或增大打印尺寸，**

设置后的二维码图案会较为简单，容易扫描。



实际上，二维码里可以放很多东西。

例如在草料二维码这个网站上，可以看到，可以放各种东西。

![image-20210122092528903](https://gitee.com/teddyxiong53/playopenwrt_pic/raw/master/image-20210122092528903.png)

这个的确是把二维码玩出花来了。



# qrcode.js

https://davidshimjs.github.io/qrcodejs/

简单使用

引入qrcode.js脚本。

然后这样写就可以了。

```
<body>
    <div>
        <div id="qrcode"></div>
    </div>
    <script>
	var qrcode = new QRCode(document.getElementById('qrcode'), '123')
    </script>
</body>
```

这样就直接显示了一个二维码。

还有2个接口

```
qrcode.clear()
qrcode.makeCode('abc')
```

用起来还是非常简单的。



参考资料

1、百科

https://baike.baidu.com/item/%E4%BA%8C%E7%BB%B4%E7%A0%81/2385673?fr=aladdin

2、

https://blog.csdn.net/a22222259/article/details/98173091

3、二维码的最大容量是多少？

https://www.zhihu.com/question/20387257