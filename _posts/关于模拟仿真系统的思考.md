---
title: 关于模拟仿真系统的思考
date: 2021-10-28 16:51:25
tags:
	- 模拟

---

--

第 1 部分将介绍模拟计算机板周围的世界，

而第 2 部分将介绍模拟计算机板及其软件的详细信息，以及如何将所有部分组合在一起以形成完整的解决方案。

最后，第 3 部分将深入研究一些更具体的仿真解决方案在实际使用中的示例以及从中获得的好处

# 1

模拟计算机系统

嵌入式计算机系统可以分为五个主要部分：

\* 计算机板本身：包含一个或多个处理器的硬件，执行嵌入式软件。

\* 在这块电脑板上运行的软件。这不仅包括用户应用程序，还包括引导 ROM 或 BIOS、硬件驱动程序、操作系统以及用于实现软件功能的各种库和中间件框架。

\* 电路板连接到的一个或多个通信网络，软件通过该网络与其他计算机上的软件进行通信。

\* 计算机运行的环境以及它使用传感器进行测量并影响使用执行器的环境。

\* 向系统的人类用户公开的用户界面。

对于本系列文章的其余部分，我们将被模拟的系统称为目标系统（与传统的交叉编译命名法通用），将开发 PC 或工作站称为主机。

显然，并非所有目标系统都具有上面列出的所有部件，但大多数都具有其中的大部分部件。

嵌入式系统的仿真工作可以只关注其中一个部分。

混合模拟和物理部分以实现“部分现实”是很常见的。



抽象与细节

构建模拟的一个关键见解是，您必须始终在模拟器细节和模拟系统的范围之间进行权衡。

看看一些极端情况，在大规模地模拟宇宙演化时，你不能使用与模拟蛋白质折叠时相同的抽象水平。

你总是可以用执行时间来增加细节或范围，但假设你想要一个合理的时间尺度的结果，妥协是必要的。

抽象规则的一个推论是模拟是一种可以始终使用最大计算机性能的工作负载（除非它受到来自世界或用户的交互速度的限制）。

更快的计算机或不太详细的模型可以让您扩大模拟系统的规模或减少模拟运行时间。一般而言，如果您计算机中的处理器未加载到 100%，则您没有充分利用模拟。

对计算机能力的高要求曾经是使用模拟的限制因素，需要使用大型、昂贵且稀有的超级计算机。

然而，今天，即使是最便宜的 PC 也有足够的计算能力在合理的时间内执行相关的模拟。

因此，计算机设备的可用性不再是问题，并且仿真应该是在开发项目中部署到每个工程师时考虑的工具



模拟环境

物理环境的模拟通常是为了它自己而进行的，而不考虑嵌入式软件开发人员最终使用的模拟模型。使用计算机辅助工具和模拟进行设计是机械和电气工程的标准做法。

例如，为发动机或加工厂等物理系统开发控制算法的控制工程师经常在 MatLab/Simulink 和 Labview 等工具中构建受控系统的模型。

然后将这些模型与未开发的控制器模型相结合，并对稳定性和性能等控制属性进行评估。从软件的角度来看，这是模拟嵌入式软件的规范以及受控环境。

对于太空探测器，环境模拟可以包括行星、太阳和探测器本身的模型。该模型可用于评估提议的轨迹，因为它可以在很短的时间内完成长达数年的任务。

结合嵌入式计算机模拟，这样的模拟器将提供关于姿态和到太阳的距离、太阳能电池板产生的电量以及导航传感器所看到的星星位置的数据。

当嵌入式系统的机械组件存在潜在危险或无法使用时，您绝对希望在使用物理硬件之前模拟软件的效果。例如，重型机械或军用车辆的控制软件最好在模拟中进行测试。

此外，在这种情况下，可用的物理原型数量相当有限，并不是每个开发人员都可以在他们的办公桌上拥有。此类模型可以使用建模工具创建，也可以用 C 或 C++ 编写（这在实践中非常流行）。

在许多情况下，环境模拟可以是从真实传感器中捕获的简单数据序列，也可以是开发人员猜测的简单数据序列。

应该注意的是，模拟环境可以用于两个不同的目的。一种是为计算机系统模拟提供“典型”数据，试图模拟最终物理系统在正常运行条件下的行为。

另一种是提供“极端”数据，对应于系统行为中的边界情况，以及对应于传感器损坏或正常运行条件之外的类似情况的“故障”数据。注入极端和错误案例的能力是模拟的一个关键好处。



模拟人机界面

嵌入式设备的人机界面部分通常也在其开发过程中进行模拟。对于测试用户界面的想法，快速原型设计和模拟是非常值得的，并且可以通过许多不同的方式来完成。一个创造性的例子是原始Palm Pilot的创造者如何使用木块来模拟携带设备的效果。

模型不是构建 aTV、手机或工厂控制计算机界面的完整实现，而是在专用用户界面 (UI) 工具中构建，在 PC 上的 Visual Studio GUI 构建器中，甚至是 PowerPoint 或 Flash。

有时，此类模拟具有复杂的行为，可通过各种脚本或什至是简单的原型软件堆栈来实现。只有当 UI 设计稳定时，你才承诺在你的真实设备上用真实代码实现它，因为这通常意味着更大的编程工作。

在开发的后期阶段，当硬件用户界面和大部分软件用户界面完成后，设备的计算机模拟需要提供输入和输出设施，以便可以在没有硬件的情况下为设备测试软件。

这种模拟的范围很广，从显示串行端口输出的简单文本控制台到用户界面面板的图形模拟，用户可以在其中单击开关、转动旋钮并观看图形表盘和屏幕上的反馈。

一个典型的例子是诺基亚的 Series 60 开发套件，它提供了一个带有键盘和小显示屏的虚拟手机。另一个例子是 VmWare、Parallels 和 VirtualPC 等虚拟 PC 工具如何将 PC 的显示屏、键盘和鼠标映射到一个目标系统。

在消费电子产品中，PC 外围设备通常用于提供接近真实系统的实时测试数据。例如，对于包含摄像头的模拟手机，网络摄像头是一个很好的测试数据生成器。

即使光学和传感器不同，它仍然提供比静态预定图像更好的东西。声音捕获和回放也是如此”您想听到机器发出的声音，而不仅仅是在显示器上观看波形。

模拟网络

当今大多数嵌入式计算机都连接到一个或多个网络。这些网络可以是系统内部的；例如，在基于机架的系统中，可以使用 VME、PCI、PCI Express、RapidIO、以太网、I2C、串行线和 ATM 来连接板卡。在汽车中，CAN、LIN、FlexRay 和 MOST 总线连接车身电子、远程信息处理和控制系统。飞机控制系统通过 MIL-STD-1553、ARINC 429 和 AFDX 等特殊总线系统进行通信。

在系统的外部接口之间，运行 UDP 和 TCP 等互联网标准的以太网很常见。手机通过蓝牙、USB 和 IR 连接到耳机和 PC，并使用 UMTS、CDMA2000、GSM 和其他标准连接到蜂窝网络。

电话系统的流量使用许多不同的协议和物理标准，如 SS7、SONET、SDH 和 ATM。智能卡使用接触式或非接触式接口连接到读卡器。传感器节点通过标准无线网络或 Zigbee 等低功耗、低速接口进行通信。

因此，存在于内部或外部网络是大多数嵌入式系统的现实。由于典型网络的规模较大，网络部分在某种程度上几乎被普遍模拟。

您根本无法在其实际部署网络内测试电话交换机或路由器，因此您必须为外部世界提供某种模拟。出于非常实际的原因，您不想在实时网络中测试手机病毒。

通常，网络上的许多其他节点正在同时开发。或者，您可能只想将多个联网系统的点模拟组合到一个模拟网络中。

# 2





参考资料

1、

https://www.embedded.com/using-simulation-tools-for-embedded-systems-software-development-part-1/