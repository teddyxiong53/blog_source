---
title: 值语义和引用语义
date: 2019-09-20 11:08:48
tags:
	- 编程

---

1

值语义

就是指对象的拷贝与原对象无关。

基本类型都是值语义。

c++的string也是值语义。拷贝之后，就跟原对象脱离关系。



一个类一旦失去了值语义，也就不能进行简单的=赋值操作了。

值语义对c++的性能影响有：

1、std库是基于值语义的。标准容器包含的元素，都具有值语义。

2、简单的bit-wise-copy一般会提高赋值性能。

3、具有值语义的，size不大的变量，在stack里，作为auto变量，传递、拷贝和基本类型完全一样，好用，而且性能很好。

动态语言缺乏值语义的能力，所以速度上很难优化。

4、在设计具有值语义的类的时候，不要保留无用的析构函数，析构函数的存在，会让你的类的语义和原始类有了本质的区别。对性能会有很大影响。



什么样的类没有值语义呢？

1、含有虚函数的类。

2、包含非值语义成员的类。

3、定义了自己的赋值=的类。

总之，非值语义的特性，具有传染性。



参考资料

1、值语义，引用语义对比理解

https://blog.csdn.net/zhc_24/article/details/82156970

2、

https://blog.csdn.net/u013279723/article/details/72323545