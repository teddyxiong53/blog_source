---
title: shell里各种括号用法
date: 2021-05-11 17:38:34
tags:
	- shell
---

--

括号有5种：

```
单个小括号()
	1、命令组。里面内容会单独开一个shell来执行，所以里面的东西，对外面不可见。
	2、命令替换。等价于反引号。$(cmd)等价于`cmd`。有些shell不支持这个。例如tcsh。
	3、数组初始化。array=(a b c d)
两个小括号(())
	1、整数扩展。((exp))。exp的只要符合C语言运算规则都可以，包括三目运算符。
	2、做算数运算。一般for循环。
	  for((i=0;i<5;i++))
	  for i in `seq 0 4`
	  for i in {0..4}
单个中括号[]
	[其实就是test。老的bash里，右边的]可以没有。新的bash必须有。
	单个中括号的限制比较多。比较只能用==和!=，而且只能比较字符串。
两个中括号[[]]
	[[则是bash里的关键字。比[]更加通用和强大。
	字符比较，右边可以是通配符。例如[[ hello == hell? ]]这个是真。
	还可以适应&& || 这些逻辑运算。
	
单个大括号{}
	1、常规用法。
		1）大括号扩展。touch {a,b}.txt ，touch {a..d}.txt
		2）字符串替换。
```

# shell里[ 和[[ 的区别

在shell脚本中，`[ ]` 和 `[[ ]]` 是用于条件测试的两种不同的结构，它们在用法和功能上有一些区别：

1. `[ ]`（方括号）：
   - 也称为单中括号。
   - `[ ]` 是传统的 shell 条件测试结构，它使用基于字符串的比较。
   - `[ ]` 在使用变量时需要小心，需要对变量进行引用，如 `"$variable"`。
   - `[ ]` 中的操作符需要用空格分隔。
   - `[ ]` 不支持高级条件测试，如正则表达式匹配。

示例：
```bash
if [ "$var" = "value" ]; then
  # 条件满足时的操作
fi
```

2. `[[ ]]`（双中括号）：
   - `[[ ]]` 是在现代shell中引入的增强型条件测试结构。
   - `[[ ]]` 支持更多的条件测试选项，如字符串比较、正则表达式匹配、文件属性检查等。
   - `[[ ]]` 可以更灵活地处理变量，不需要引号引用。
   - `[[ ]]` 中的操作符不需要用空格分隔。

示例：
```bash
if [[ $var == "value" ]]; then
  # 条件满足时的操作
fi
```

总结：

- 推荐在现代的Bash脚本中使用 `[[ ]]`，因为它提供了更强大的条件测试功能和更容易处理变量的语法。
- 在老版本的shell或需要与其他shell兼容的情况下，你可以使用 `[ ]`，但要小心处理变量引用和操作符之间的空格。

`[[ ]]` 结构在许多情况下更加强大且易于使用，特别是在复杂的条件测试和字符串操作时，因此它是更常见的选择。



# 参考资料

1、shell中各种括号的作用详解()、(())、[]、[[]]、{}

这篇文章非常好。详细又全面。

https://www.cnblogs.com/splendid/p/11201733.html