---
title: 斐讯K2刷机方法
date: 2019-04-14 09:57:30
tags:
	- 路由器

---

1

这是楼主从去年年中自行设计开发的一个全新的 Bootloader，并用于取代 U-Boot。
此 Bootloader 暂取名为 Breed，**不是 U-Boot，也不是 U-Boot 的改进版**，是全新、独立的、跟 U-Boot 平级的 Bootloader。

特别提醒：

“不死”指的是所有固件更新操作均在 Breed 里面完成。

因为有些官方升级固件自带 Bootloader，

如果从官方固件的 Web 进行升级，那么会导致 Breed 被覆盖。

**Breed 在刷入固件时会自动去掉固件自带的 Bootloader，因此能够保证 Breed 本身是“不死”的。**

Breed 不支持启动非 Linux 类型的固件，例如 TP/水星/迅捷的 VxWorks 系统。

因此如果固件大小小于等于 2MB，那就肯定不能刷了。

Breed 拥有以下新特性：

- 实时刷机进度，进度条能准确反映刷机进度
- Web 页面快速响应
- 最大固件备份速度，依 Flash 而定，一般能达到 1MB/s
- 免按复位键进入 Web 刷机模式
- Telnet 功能，免 TTL 进入 Breed 命令控制台
- 复位键定义测试功能
- 固件启动失败自动进入 Web 刷机模式
- 可自定义位置和大小的环境变量块



使用breed刷机的步骤

1、刷入breed。

2、进入到breed的web控制台。

3、在web控制台选择固件进行写入操作。

完成。

先把路由器恢复出厂设置，方法是按住reset键5秒左右，看到灯闪烁了就可以松开了。

然后用网线把电脑的网口跟路由器的一个LAN口直接连起来。

电脑上访问一下: http://192.168.2.1，看看能不能访问到。

这一步是确认网络的连通性。

然后电脑上用管理员身份打开“Breed Web助手通用版”这个exe文件。

刷机方案选择斐讯K1，K2全自动方案。其他的选项不动。

然后点击刷机按钮，就可以自动帮你完成刷入breed的操作。

这个操作背后，其实包括了：设置密码，固件降级，开启telnet和ssh，刷入breed这一系列操作。

等到电脑上显示“刷机完成”。我们再等2分钟左右，拔掉路由器的电源（这个是等什么？确保写入flash成功？）

然后按住reset按键，对路由器上电，10秒后松开按钮。

然后电脑访问:http://192.168.1.1 ，如果正常，是可以访问到breed的网络控制台的。

然后在web控制台界面上，选择恢复出厂设置 - config区（公版），点击执行。

然后点击固件更新，只勾选固件更新就好了。等几分钟就可以更新完成。



前面说了，路由器本质是 Linux 主机，这就意味着它需要讲求配置，除了老生常谈的强弱话题之外，还因为路由器这边没有微软那样能一统行业并作出标准化的大佬，所以到底能刷什么固件，首先要看路由器的硬件平台出自谁手。

选项不多，就四家大的，博通（Boardcom），高通（Qualcomm），联发科（Mediatek，收购的Ralink），瑞昱（Realtek），以及两个二线厂商，英特尔（Intel，收购的 Lantiq）和美满电子（Marvel）。



**梅林 —— 博通**

先说博通吧，毕竟是行业高端的头把交椅，还有性能销量口碑俱佳的厂商——华硕（ASUS）的鼎力支持。那么大家自然可以猜到，**博通平台的代表固件其实就源自华硕，全名叫 Asuswrt-merlin，简称梅林**，本质上是基于华硕官方固件的二次开发版本，毕竟华硕固件本身就做得很出色，UI 好用，性能稳定，以它为蓝本进行改进省时省力品质高，兼容性还好。

因为平台的通用性，以及**博通有 CFE 这个可用的 bootloader**，其他厂商采用博通方案的产品也可以运行梅林固件，只要稍加适配即可。

这对于网件（Netgear）和领势（Linksys）的用户而言可以说是福音，毕竟这俩位的原厂固件实在感人，一个特别喜欢转圈，一个功能残废。因而，这可以说是“华硕拯救行业”的实例之一。

**Padavan —— 联发科**

既然说了之一，那就肯定还有例子。这次是在低端产品上，原本联发科平台因为功耗低渠道多，采用的厂商众多，也有很多性价比高的产品，但因为各厂固件开发能力参差不齐，很多看上去美丽的产品，买来一用发现是坑货。

直到某一天，俄罗斯开发者基于华硕 RT-N56U 进行魔改，推出了神作级别的 Padavan 固件（国内论坛黑话叫“华硕老毛子固件”），问题终于得到了解决，“华硕又一次拯救了行业”。**这样以 Padavan 为核心，配合联发科的开源驱动体系，再加上国内开发者 hackpascal 的全能 BootLoader——Breed，联发科平台的口碑至此得以起飞，成为中低端玩家们的首选。**



**LEDE 等开源项目**

除了博通和联发科之外，其他平台相对就没这么幸福了，因为华硕爸爸对这些平台不够倾心。那么这些产品，除了第三方开发者上传的官方固件魔改版之外，就只有那些开源项目可选，其中最大最全的是 LEDE（毕竟已经合并了 OpenWRT）。

这种开源项目最大的优势就是潜力大，想添加什么功能都可以自行编译，但问题也很明确，首先是过于极客，想玩得 6 不仅要熟悉路由器，还要精通 Linux 的使用，UI 对普通用户也很不友好……反正笔者用过一次之后觉得打扰了；其二就是性能未必最佳最稳定，因为驱动没开源的关系，不少都是移植版或者流出的测试版本，能用就不错了，不能要求太高。

**官方固件修改版**

这个顾名思义，就是开发者通过解包官方固件，并添加其他功能代码，最后重新编译打包而成，好处是不缺驱动，bug 比较少，热门机型都有的刷，缺点是 UI 和内核与官方一致，如果官方做得很烂，官改也不会更好，最多解锁一些功能。

值得一提的是，严格来说，前面讲的梅林和 Padavan 都属于官改，毕竟基于华硕固件，无论基础还是二次开发水准都要比普通官改好得多。



**为了刷机，购买路由器时需要注意什么？**

看完前面这些，其实就已经可以总结了，无非就是平台不要冷门，**最好是博通、联发科**，懒得折腾建议直接买华硕，**闪存和内存不能太小**，起码要足够第三方固件的运行。噢对了，需要特别注意的是，以上这些都是基于 Linux 的产品，其实还有非 Linux 的路由器，来自普联（TP-LINK、FAST、Mercury），这并不是因为他们开发能力有多强，而是因为这家厂商强过于强调压缩成本，要减小闪存和内存，甚至不够 Linux 内核运行用的，所以，强烈建议各位在买路由器的时候，最好屏蔽普联的产品。



参考资料

1、【2020-01-14】AR/QCA/MTK Breed，功能强大的多线程 Bootloader

https://www.right.com.cn/forum/thread-161906-1-1.html

2、斐讯K2刷不死breed与第三方固件教程

https://www.cnblogs.com/xuliangxing/p/6486560.html

3、bootloader分析-breed

http://iytc.net/wordpress/?p=1937

4、路由器固件选择指南

https://zhuanlan.zhihu.com/p/59290532