---
title: java之内存模型
date: 2019-04-02 17:53:04
tags:
	- java

---



java内存模型，Java Memory Model。缩写为JMM。

JMM定义了jvm在内存里的工作方式。

如果我们要深入理解Java的并发编程，就需要把JMM理解透彻。

java内存模型定义了：

1、多线程之间共享变量的可见性。

2、如何在需要的时候对共享变量进行同步。

之前版本的内存模型效果不好，在jdk1.5的时候，进行了重构，沿用至今。



在并发编程领域，有两个关键问题：线程之间的通信和同步。



并发编程有两种模型：

1、共享内存。

2、消息传递。



java采用的是共享内存的方式。

java线程之间的通信总是隐式进行的。

整个过程对程序员透明。

如果不理解这种通信机制，可能会遇到各种奇怪的内存可见性问题。



从抽象的角度看，JMM定义了线程和主内存之间的抽象关系。

```
线程之间的共享变量存放在主内存里（main memory）。
每个线程都有自己的私有本地内存（local memory）。
本地内存里存储了变量副本。

本地内存并不真实存在，是一个抽象概念。

```



# jvm对java内存模型的实现

在jvm内部，java内存模型把内存分为了两个部分：

1、线程栈。

2、堆。



线程栈里包含了：

1、调用栈。

2、所有基本类型的局部变量。



堆里包含了：

所有的对象信息。不过是局部变量还是成员变量。

包括基本类型的包装类的。



参考资料

1、全面理解Java内存模型

https://blog.csdn.net/suifeng3051/article/details/52611310

