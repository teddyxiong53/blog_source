---
title: 云计算之K3S
date: 2024-05-02 15:03:49
tags:
	- 云计算

---

--

# 官网

https://k3s.io/

代码

https://github.com/k3s-io/k3s/

它被打包为单个二进制文件。

它添加了对 sqlite3 作为默认存储后端的支持。还支持 Etcd3、MySQL 和 Postgres。

它将 Kubernetes 和其他组件包装在一个简单的启动器中。

它对操作系统的依赖性极小甚至没有（只需要一个健全的内核和 cgroup 安装）。



我们希望安装的 Kubernetes 内存占用大小只有一半。 

Kubernetes 是一个 10 个字母的单词，风格化为 k8s。

因此，像 Kubernetes 一半大的东西就是一个 5 个字母的单词，风格化为 K3s。 

**K3s 既没有长格式，也没有官方发音。**



# K3S简介

K3s是一个轻量级的Kubernetes发行版，

专为边缘计算、IoT设备、开发和测试等场景而设计。

它由Rancher Labs开发并维护，旨在提供一个简化的、易于部署的Kubernetes解决方案，

特别适用于资源受限的环境。

以下是K3s的一些主要特点和优势：

1. **轻量级和简化部署：** K3s相对于传统的Kubernetes发行版更轻量，它的二进制文件大小较小，并且安装和部署过程更加简化，可以在资源受限的环境中更容易地部署和运行。

2. **资源消耗更低：** 由于K3s专为边缘计算和资源受限的环境设计，因此它在内存和CPU消耗方面相对较低，这使得它在嵌入式设备或边缘节点上的运行更加高效。

3. **集成的核心组件：** K3s集成了Kubernetes的核心组件，并对一些组件进行了简化和优化，以减少资源占用和复杂性，但仍然保留了Kubernetes的主要功能和API兼容性。

4. **自动化和易用性：** K3s提供了一键安装和升级的脚本，使得部署和管理变得更加简单和自动化，同时也提供了一些额外的工具和功能，如自动TLS证书生成和内置的服务发现。

5. **适用于边缘场景：** 由于K3s的轻量级和简化部署特性，以及对边缘计算场景的优化，因此它特别适用于在边缘环境中部署和运行Kubernetes集群，如IoT设备、车载设备等。

总的来说，K3s为边缘计算和资源受限的环境提供了一个轻量级、简化的Kubernetes解决方案。它通过降低部署和运维的复杂性，使得更多的应用场景可以受益于Kubernetes的强大功能，同时提高了边缘环境下应用的可靠性和可管理性。

# 发展历史

K3s的发展历史可以追溯到2019年，由Rancher Labs推出。以下是K3s的主要发展历程：

1. **2019年5月 - K3s首次发布：** Rancher Labs于2019年5月首次发布了K3s。最初的版本提供了一个轻量级的Kubernetes发行版，专为边缘计算和资源受限的环境而设计，以简化Kubernetes的部署和管理。

2. **持续改进和迭代：** 在发布首个版本后，K3s持续进行改进和迭代。Rancher Labs团队致力于通过增加新功能、改进性能和稳定性等方式来提升K3s的质量和功能。

3. **社区贡献和生态系统发展：** 随着时间的推移，K3s逐渐吸引了越来越多的社区贡献者和用户，形成了一个活跃的社区。在社区的共同努力下，K3s的生态系统得到了不断的发展壮大，包括各种工具、插件和文档资源等。

4. **逐渐成为行业标准：** 随着Kubernetes在云原生领域的普及和应用，K3s也逐渐成为了行业标准之一，特别是在边缘计算等新兴领域。越来越多的组织和企业开始采用K3s来构建和管理他们的Kubernetes环境。

5. **2020年以后 - 持续发展和推广：** 随着时间的推移，K3s继续发展壮大，吸引了越来越多的用户和社区贡献者。Rancher Labs不断改进和完善K3s，同时也与其他项目和组织合作，推动Kubernetes生态系统的发展和创新。

总的来说，K3s作为一个轻量级、简化的Kubernetes发行版，在边缘计算和资源受限环境中发挥了重要作用，并逐渐成为了行业标准之一。随着Kubernetes生态系统的不断发展和壮大，K3s也将继续发挥重要作用，并为用户提供简单、高效的Kubernetes解决方案。

# 树莓派上用K3S进行环境搭建

在树莓派上使用K3s搭建Kubernetes环境是一种常见的用例，特别适用于边缘计算场景或者简单的个人实验。以下是在树莓派上安装和配置K3s的基本步骤：

1. **准备树莓派：** 确保您有一台或多台树莓派设备可用，并已经正确设置和连接到网络。确保树莓派设备上已经安装了Raspbian或者其他兼容的操作系统，并且已经进行了基本的配置（例如设置了主机名、SSH访问等）。

2. **安装K3s：** 使用SSH连接到树莓派，并执行以下命令来下载和安装K3s：

    ```bash
    curl -sfL https://get.k3s.io | sh -
    ```

    这将自动下载并安装K3s二进制文件，并将其设置为系统服务，使其在启动时自动运行。

3. **等待安装完成：** 安装过程可能需要一些时间，取决于树莓派的性能和网络连接速度。安装完成后，您可以使用以下命令来检查K3s是否已成功运行：

    ```bash
    sudo kubectl get nodes
    ```

    如果一切正常，您应该会看到树莓派节点的状态为Ready。

4. **测试集群：** 现在，您可以使用kubectl命令行工具在树莓派集群上运行一些测试。例如，您可以部署一个简单的nginx容器，并查看部署的状态：

    ```bash
    kubectl create deployment nginx --image=nginx
    kubectl get pods
    ```

    如果一切正常，您应该能够看到nginx Pod正在运行，并且处于就绪状态。

5. **可选：** 如果您有多个树莓派设备，您可以使用K3s的高可用性（HA）模式来配置具有冗余控制平面的Kubernetes集群。这样可以提高集群的可靠性和容错能力。

通过这些步骤，您可以在树莓派上成功安装和配置K3s，并在自己的环境中运行一个简单的Kubernetes集群。请注意，这只是一个基本的入门指南，K3s还有许多其他功能和配置选项，您可以根据需要进一步探索和定制。

# K3S有webui吗

是的，K3s有一个名为"Rancher K3s"的简单Web用户界面（UI）。Rancher Labs是K3s的主要维护者之一，他们为K3s提供了一个轻量级的Web UI，以便用户可以更轻松地管理和监控他们的Kubernetes集群。

您可以通过以下步骤在K3s集群中启用Web UI：

1. **安装Dashboard插件：** 在安装K3s时，可以选择安装Dashboard插件。如果您在安装时选择了安装Dashboard插件，则无需额外步骤，K3s会自动安装并配置Dashboard插件。

2. **手动安装Dashboard插件：** 如果您在安装时未选择安装Dashboard插件，您仍然可以手动安装它。可以通过以下命令手动安装Dashboard插件：

    ```bash
    kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0/aio/deploy/recommended.yaml
    ```

    这将在您的Kubernetes集群中部署Dashboard。

3. **访问Dashboard：** 安装完成后，您可以通过以下命令启动Dashboard代理：

    ```bash
    kubectl proxy
    ```

    然后，在浏览器中访问以下URL以打开Dashboard UI：

    ```
    http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/
    ```

4. **登录Dashboard：** 访问Dashboard URL后，您将被重定向到登录页面。您可以选择使用kubeconfig文件或者Token进行登录。要获取Token，请运行以下命令：

    ```bash
    kubectl -n kube-system describe secret $(kubectl -n kube-system get secret | grep default-token | cut -d " " -f1)
    ```

    这将显示一个包含Token的字符串。将该Token复制并粘贴到Dashboard登录页面上进行验证。

一旦登录成功，您就可以在Dashboard UI中查看和管理您的Kubernetes集群了。请注意，K3s的Dashboard UI是一个基本的用户界面，可能不如其他Kubernetes管理工具（如Rancher）提供的功能丰富，但对于简单的集群管理和监控是足够的。



# 对个人开发者K3S使用举例

个人开发者可以使用K3s来搭建和管理自己的Kubernetes集群，以便在本地环境或者云服务器上进行开发、测试和部署容器化应用程序。以下是一些个人开发者可能使用K3s的场景和举例：

1. **本地开发环境：** 个人开发者可以在自己的笔记本电脑或台式机上使用K3s搭建一个本地的Kubernetes集群，用于开发和测试应用程序。他们可以使用Docker Desktop或者Minikube来运行K3s，并在集群中部署和调试容器化应用程序。

2. **边缘计算实验：** 如果个人开发者对边缘计算感兴趣，他们可以利用K3s在边缘设备上搭建一个小型的Kubernetes集群，用于实验和研究边缘计算场景。他们可以使用树莓派等廉价硬件设备来搭建集群，并部署一些简单的边缘应用程序进行测试。

3. **学习和教育用途：** 个人开发者可以利用K3s来学习和教育Kubernetes相关的知识和技能。他们可以在自己的虚拟机或云服务器上搭建一个Kubernetes集群，并使用Kubectl和其他工具来管理集群和部署应用程序。

4. **个人项目部署：** 个人开发者可以使用K3s来部署自己的个人项目和应用程序。他们可以在云服务器上租用一些廉价的虚拟机实例，并使用K3s来搭建一个小型的生产环境Kubernetes集群，用于部署自己的应用程序并提供服务。

总的来说，个人开发者可以利用K3s来搭建和管理自己的Kubernetes集群，以支持他们的开发、测试、学习和个人项目部署等需求。K3s提供了一个简单、轻量级的Kubernetes解决方案，非常适合个人开发者在本地环境或者云服务器上进行容器化应用程序的开发和部署。