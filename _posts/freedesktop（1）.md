---
title: freedesktop（1）
date: 2020-01-06 09:35:08
tags:
	- Linux

---

--

对Linux桌面系统的技术了解不是很多，看gstreamer是属于freedesktop，那就从freedesktop入手，梳理相关的内容。

freedesktop的官网在这里：

https://freedesktop.org

freedesktop的宗旨是：聚焦于开源图形和桌面系统的互通和共享。我们不生产桌面系统，但是帮助其他人来实现桌面系统。

freedesktop旗下的项目主要是作为库或者服务而存在。

主要管理的软件是聚焦在驱动、图形和媒体服务的中间件、进程间通信、授权、输入法、国际化。

freedesktop不参与具体的软件开发，只是提供一个交流的平台。具体的开发由具体的项目人员各自进行。

freedesktop由redhat在2000年3月成立。

所有的项目代码路径，这篇博客里有列出来。

https://blog.csdn.net/cuijpus/article/details/4176199

# 简介

FreeDesktop 是一个旨在改善 Linux 和其他类 Unix 操作系统的桌面环境协作的项目。

它不是单独的软件或工具，而是一个由多个标准、规范和协议组成的共同体，

==旨在增强不同桌面环境之间的兼容性和互操作性。==

该项目的目标是创建一个统一的桌面环境，使得不同的 Linux 发行版和桌面环境能够更好地协同工作，共享资源并提供更一致的用户体验。其中一些主要的 FreeDesktop 规范和标准包括：

1. **XDG Base Directory 规范：** 定义了在用户主目录下的各种文件和目录的标准化命名方式，用于存储应用程序数据、缓存和配置文件等。

2. **Desktop Entry 规范：** 定义了桌面环境中程序启动器（.desktop 文件）的格式，包括应用程序的名称、图标、执行命令等信息。

3. **Icon Theme 规范：** 规范了图标主题的结构和命名约定，使得不同桌面环境可以共享和使用同一套图标。

4. **Desktop Notification 规范：** 定义了用于在桌面环境中显示通知消息的标准接口。

通过这些规范和标准，FreeDesktop 试图让不同的桌面环境（比如 GNOME、KDE、XFCE 等）在用户体验和应用程序互操作性方面更加统一和兼容。

这有助于开发人员编写更通用、跨平台的应用程序，并提升用户在不同桌面环境下的一致性体验。

需要注意的是，FreeDesktop 不是一个特定的软件或工具，

而是一系列标准和规范的集合，为桌面环境的开发者和用户提供了一种更一致、更统一的工作方式。

## XDG Base Directory 规范

XDG Base Directory 规范旨在定义在用户主目录下存储特定类型数据的标准化方式。

这个规范的目的是为了让不同的应用程序在不同的桌面环境下能够更好地找到和使用用户数据，提高跨平台的兼容性。

根据 XDG Base Directory 规范，主要的标准目录包括：

1. **`$XDG_CONFIG_HOME`（默认为 `~/.config`）：** 存放用户特定的配置文件，每个应用程序都应该在这里创建一个单独的目录用于存储自己的配置信息。

2. **`$XDG_DATA_HOME`（默认为 `~/.local/share`）：** 存放应用程序专用的数据，比如说保存的文件、数据库、缓存等。

3. **`$XDG_CACHE_HOME`（默认为 `~/.cache`）：** ==存放缓存文件，这些文件可以安全地被删除而不会影响应用程序的功能。==

如果环境变量 `$XDG_CONFIG_HOME`、`$XDG_DATA_HOME`、`$XDG_CACHE_HOME` 没有被设置，规范中定义了默认的目录路径。

这些标准目录的存在使得不同的应用程序能够更加统一地管理用户数据，不会混淆在主目录下，也方便用户在文件系统中进行管理和清理。

这个规范的实现有助于提高不同桌面环境下应用程序的兼容性，并促进了更清晰、更有组织的用户数据管理方式。

## Desktop Entry 规范

Desktop Entry 规范定义了桌面环境中应用程序启动器的格式，

即 `.desktop` 文件的结构和内容。

这些 `.desktop` 文件包含了应用程序的信息，

如名称、图标、执行命令、支持的文件类型等，

使得桌面环境能够识别和启动这些应用程序。

每个 `.desktop` 文件都包含一些关键字段，其中一些重要的字段包括：

- **Name（名称）:** 应用程序的显示名称。
- **Exec（执行命令）:** 启动应用程序的命令。
- **Icon（图标）:** 应用程序的图标名称或图标文件的路径。
- **Type（类型）:** 应用程序的类型，比如 Application、Link 等。
- **Categories（分类）:** 应用程序所属的分类，比如 Multimedia、Utility、Development 等。
- **MimeType（文件类型）:** 应用程序支持的文件类型。

这些字段允许桌面环境根据用户的操作在菜单中显示应用程序，或者允许用户通过文件管理器或命令行启动这些应用程序。

例如，一个简单的 `.desktop` 文件可能看起来像这样：

```plaintext
[Desktop Entry]
Name=Firefox
Exec=firefox
Icon=firefox
Type=Application
Categories=Network;WebBrowser;
MimeType=text/html;text/plain;
```

这个文件定义了一个名为 Firefox 的应用程序，它的执行命令是 `firefox`，使用名为 `firefox` 的图标，属于 Application 类型，分类为 Network 和 WebBrowser，并且支持 `text/html` 和 `text/plain` 两种 MIME 类型的文件。

==Desktop Entry 规范使得不同的桌面环境能够使用同一种方式来识别和启动应用程序，从而增强了不同桌面环境之间的兼容性。==

## Icon Theme 规范

Icon Theme 规范定义了图标主题的结构和命名约定，

以确保不同桌面环境能够共享和使用相同的图标集合。

这种规范化的图标命名和组织方式有助于确保应用程序在不同桌面环境下拥有一致的外观。

一般来说，==一个图标主题包含了一系列的图标文件==，每个文件代表了特定大小和分辨率的图标。

这些图标按照特定的命名约定进行组织，以便桌面环境能够根据需要找到合适的图标来显示在不同的情景下，比如菜单中、应用程序启动器上等。

Icon Theme 规范定义了以下几个重要的文件和目录：

- **`index.theme` 文件：** 这个文件是图标主题的入口文件，包含了主题的基本信息，比如主题名称、可用图标大小和目录结构等。它指定了该主题中包含的图标尺寸和位置。

- **`scalable` 目录：** 包含矢量图形格式（通常是 SVG 格式）的图标文件，这些图标可以无损地缩放到不同的尺寸而不失真。

- **`<size>` 目录：** 包含特定尺寸（例如 `16x16`、`48x48` 等）的图标文件，每个尺寸对应一个目录。

图标主题按照一定的命名约定来组织，使得不同的图标可以按照规定的位置和名称被桌面环境正确地识别和使用。这种规范化的图标主题结构有助于提高应用程序图标在不同桌面环境下的一致性，提供了更统一的用户界面体验。

## Desktop Notification 规范

Desktop Notification 规范定义了在桌面环境中显示通知消息的标准接口。

这个规范旨在让应用程序能够以一致的方式向用户发送通知，而不受特定桌面环境的限制，提供更统一的用户体验。

这个规范涉及以下关键点：

1. **通知的内容和格式：** 规范定义了通知消息的内容应该包括什么，比如标题、正文、图标等。它还描述了通知的样式和格式，比如弹出通知的位置、持续时间等。

2. **通知的交互性：** 规范也考虑了通知消息的交互性，允许用户对通知进行操作，比如关闭、延迟显示、或者执行特定的操作。

3. **通知的 API 接口：** 规范定义了应用程序可以使用的 API 接口，以便于程序员开发符合规范的应用程序，能够在不同桌面环境下一致地发送通知消息。

这个规范的实现使得不同的应用程序能够在各种桌面环境下统一地显示通知消息，而不会因为桌面环境的差异而出现不同的行为或样式。这提供了更加统一和可预期的用户体验，无论用户使用的是 GNOME、KDE、XFCE 还是其他桌面环境。

# 规范文件梳理

所有的规范文件在这里

https://www.freedesktop.org/wiki/Specifications/

互操作性规范

freedesktop.org 制定互操作性规范，但我们不是官方标准机构。

==项目不需要实施所有这些规范，也不需要认证。==

以下是我们制定的一些规范，==其中许多都以“XDG”为旗帜，它代表跨桌面组。==

其中一些规范正在（非常）活跃地使用，并且有大量感兴趣的开发人员。

其中许多被认为是稳定的，不需要进一步开发，并且可能没有积极的开发。

其中一些没有被使用或广泛实施。

如果您想提出新规范或对现有规范进行更改，请在 GitLab XDG 项目下提交有关规范的问题，或在 xdg@ 邮件列表上进行讨论。

请注意，此页面上的一些链接和信息已经过时。

我们正在对其进行更新并确保其准确。如果您有任何疑问，请查阅邮件列表或 GitLab。

## 广泛使用的规格：

| 规范名字                       | 说明                                                         |
| ------------------------------ | ------------------------------------------------------------ |
| AutoStart                      | 应用程序如何在用户登录后自动启动，<br />以及可移动介质如何在安装介质后请求执行特定应用程序或打开介质上的特定文件。 |
| 桌面基本目录 (basedir)         | 桌面应如何定位文件，例如配置文件或应用程序数据文件。         |
| Desktop Entries                | 也就是.desktop文件。<br />描述应用程序信息（例如名称、图标和说明）的文件。这些文件用于应用程序启动器和创建可启动的应用程序菜单。 |
| Desktop Menu                   | 如何从桌面条目构建菜单。                                     |
| 文件管理器 D-Bus 接口          | 与桌面文件管理器交互的常用方式。                             |
| 文件 URI                       | 如何创建和解释解释 file:// URI，用于拖放和其他桌面用途。     |
| 免费媒体播放器规范             | 跨播放器和媒体格式存储和读取元数据的标准方法。               |
| 图标主题                       | 存储图标主题的常用方式。                                     |
| 媒体播放器远程接口规范 (MPRIS) | 用于控制媒体播放器的 D-Bus 接口                              |
| 共享 MIME 数据库               | 包含常见的 MIME 类型、描述以及确定文件类型的规则。           |
| 启动通知                       | 一种允许桌面环境跟踪应用程序启动、提供用户反馈和其他功能的机制。 |
| 垃圾箱                         | 所有“垃圾箱”实现应存储、列出和取消删除垃圾文件的常见方式。   |
| XML 书签交换语言 (XBEL)        | 一种互联网“书签”交换格式。                                   |
|                                |                                                              |

