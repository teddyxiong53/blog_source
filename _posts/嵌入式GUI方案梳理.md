---
title: 嵌入式GUI方案梳理
date: 2020-09-16 16:12:32
tags:
	- 嵌入式

---

1

在嵌入式rtos上，跑一个效果还过得去的gui，有哪些可选的方案？

商用免费的。开发方便的。占用资源少的。

rt-thread上现在主推的是柿饼UI。也给出了比较好的工具。

目前主流的嵌入式GUI开发技术中，RT-Thread/Persimmon、TouchGFX和emWin是最受人瞩目的。



RT-Thread/ Persimmon是国内主导开发的实时线程操作系统RT-Thread中的图形用户界面，是一款面向嵌入式系统的，

具备多窗口、多线程的，

类似Android界面效果的C++ GUI，

构建于RT-Thread物联网操作系统之上。

目前也已经发展到了RT-Thread/Persimmon 2.0，**支持设计器及脚本方式开发**。

尽管稍逊于安卓系统显示效果，但其资源占用率相比Linux方案低一个数量级，比安卓系统更是低几个数量级，成本也不高



RT-Thread创始人兼睿赛德电子科技总经理熊谱翔在接受《电子工程专辑》独家专访时表示，

RT-Thread原有的以C语言模拟面向对象技术进行开发的RTGUI在代码简洁性、可读性和实用性上难以满足需求

简单来说，由触控GUI带来的面向对象需求，虽然使用C语言能够实现，

但太过繁琐、复杂，和公司一直以来追求的简洁之美背道而驰。

思考再三，他们决定依照现代化GUI风格重写GUI组件，即以C++为基础，支持多点触摸，提供类似signal/slot信号槽的使用方式，包括各种动画特效等。

而这一支持界面动画效果的全新GUI，RT-Thread将其称之为柿饼(Persimmon) UI。



如前文所述，Persimmon是以C++编写的，因为GUI上的一系列控件以C++面向对象的方式来描述会更合理，

例如一个button，一个label，一个image，每个对象有他们自己的属性、方法等。

当然C++也会带来一些问题，比如调试困难，开发周期长。

为了某一效果，代码反复迭代不说，做出来的UI效果还不像安卓、iOS那样炫丽，千篇一律等。



熊谱翔说，在这类传统GUI开发过程中，他们发现开发人员面临的痛点除了调试困难外，学习成本高，上手难度大，各种绘图API让人头大。

更要命的是，UI一旦确定，后期维护困难，无法升级。 

 

为了最大程度地降低上手难度，柿饼UI对原来的Persimmon 1.0版本进行了升级，变成了2.0版本，

并把复杂的UI效果都封装成一个个的控件，同时对控件的配置要求降到最低。

设计人员只需通过拖 - 摆 - 轻配，就能完成整个UI效果的设计，所见即所得。

目前，**柿饼UI设计器支持21个控件**，不仅覆盖了开发者日常基本的需求，还有“旋转木马”这样具备炫酷特效的控件。

同时，柿饼UI也强调快捷的开发方式，采用了美工+“前端”模式的设计理念，

类似前端的小程序编程，使用JavaScript脚本语言来编写用户业务逻辑。

也就是说，在美工准备好素材的前提下，设计人员只需通过柿饼UI设计器设计好UI框架，再通过JavaScript脚本语言，只需几行代码就可以实现控件间复杂的事件传递，行为响应等。

这种做法，可将调试时间从之前的2-3个月大幅缩短至1周左右，

开发者只需把精力集中在逻辑控制上即可，极大提升了开发效率。

**同时，柿饼UI设计器支持板级效果仿真，在PC端仿真的同时就能体验到真机运行的效果。**

效果满意后，开发人员可以在设计器内通过USB一键下载到设备，非常方便。



针对有用户质疑柿饼UI并未开放出全部代码的做法，邹诚解释称，RT-Thread操作系统的推广与生态系统搭建仍然是公司的核心战略，开源免费是前提，这是毋庸置疑的。

因此，工程师可以从官网上下载90%以上的相关资源。

但是，考虑到公司的研发投入和代码使用维护的难度，确实有少数组件没有实现开源，需要与相关企业展开授权合作。



参考资料

1、柿饼ui官网文档

https://www.rt-thread.org/document/persimmon/site/

2、RT-Thread 柿饼GUI

https://www.cnblogs.com/jiangzhaowei/p/10857997.html

3、RT-Thread的GUI：Persimmon柿饼 PersimmonUI

https://www.crifan.com/rt_thread_ui_persimmon_ui_persimmonui/