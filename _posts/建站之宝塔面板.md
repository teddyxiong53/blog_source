---
title: 建站之宝塔面板
date: 2019-04-29 11:27:25
tags:
	- 建站

---



有个vps闲置，想利用起来，看看怎么建站吧。

反正目前有一个域名teddyxiong53.ml。

很早之前就听说了宝塔面板了。今天又无意中搜索到了AMH面板。

先安装了AMH的，发现不交钱完全没法用，果断卸载。

再安装宝塔面板，发现这个好多了。免费也能用。

在我的vps上安装。

宝塔面板的官网是：https://www.bt.cn/

Ubuntu和debian都是用下面的命令安装。

```
wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &&  bash install.sh
```

是安装到/www目录下的。

安装大概需要2分钟。

安装完成后，会打印访问地址，用户名、密码。打开地址进行登陆，就可以进行登陆。

登陆进去后，会提示你安装lnmp或者lamp。

默认给我们生成的用户名和密码太复杂，我们可以自己在面板里改了。



我选择lnmp。

php是5.5的，mysql也是版本5的。

总之都是版本相对比较低的。

选择极速安装方式。

但是看起来是在编译安装。

估计要编译几个小时才能编译完成。

我选择取消，选择就没法重新安装lnmp了。

我在vps上重新安装宝塔面板看看。

从最后的打印看，用户名没有变，但是密码给你重新生成了。



另外，安装宝塔面板好像导致了我的ssh端口被关闭了。

到宝塔面板里放行端口里打开就好了。

另外，可以看到默认把22号给打开了。这个不安全，我删掉。



我选择手动安装

```
1、安装nginx1.15
2、安装mysql

```

我就奇怪了，为什么选择了极速安装，还是在进行编译安装？

这么坑，我还不如自己用命令行安装呢？

或者我直接用lnmp包来安装。

```
wget http://soft.vpser.net/lnmp/lnmp1.5.tar.gz -cO lnmp1.5.tar.gz && tar zxf lnmp1.5.tar.gz && cd lnmp1.5 && ./install.sh lnmp
```

都选择默认就好了。

然而这个还是要编译。编译就编译吧。

至少shell上编译可以看到进度，心里还是有底的。

花了43分钟，安装完成了。

```
Checking ...
Nginx: OK
MySQL: OK
PHP: OK
PHP-FPM: OK
```

现在访问我的vps的ip地址，可以看到首页了。

但是，宝塔面板居然不能识别我自己安装的环境。

这就坑爹了。

还是用宝塔面板再安装一次吧。

安装完成了。

在面板上新建一个网站。

然后在freenom上新建一个A记录。

www，对应地址为vps的ip地址。

然后就可以用www.teddyxiong53.ml访问了。



freenom设置不带www的A记录。

就添加一条A记录，让name这里为空就好（有的注册商是用@符号）。但是freenom不是。

但是我这么操作了，还是没有用。

是要过几分钟才生效的。





接下来看看怎么进行在一台服务器上搭建多个网站。

```
默认网站：展示个人基本信息。
www.teddyxiong53.ml
论坛
bbs.teddyxiong53.ml
用discuz
博客
blog.teddyxiong53.ml
用emlog
或WordPress
```

安装目录是在/ww目录。nginx的配置在/www/server/nginx目录下。

可以看到：

```
/www/server/panel/vhost/nginx/*.conf;
```



只需要在面板建立这些网站。

然后在freenom上天机对应的A记录就可以了。

不需要手动改配置文件这些。



奇怪的是，blog的是可以正常到blog界面。

而bbs的，还是调到了www的界面。



先不管。

看看emlog的安装。

```
1. 将src文件夹下的所有文件上传到服务器你要安装emlog的目录。
2. 在浏览器上访问您的站点域名会出现安装界面，按照提示填写后提交。
3. 安装成功，开始你的创作吧。
```

需要把config.sample.php改成config.php，不然会报找不到。

但是我的mysql启动不了。不知道是为什么。难道是内存不够？

我安装的是5.5版本的。

内存只有512M。的确很小。



我重新安装了一次。

还是一样。

我这样手动启动，可以了。

```
/www/server/mysql/bin/mysqld --user=root
```



然后在数据库管理界面。

树洞添加一个数据库，名字为emlog。用户名也emlog。

密码用我最简单的密码。

```
配置文件(config.php)不可写。如果您使用的是Unix/Linux主机，请修改该文件的权限为777。如果您使用的是Windows主机，请联系管理员，将此文件设为可写
```

改一下就好。

然后就成功了。

写一篇测试文章看看。

需要把install.php删掉。不然有风险。



emblog的问题在于，不支持markdown。

不过好像有插件可以支持。



参考资料

1、让 emlog 支持 Markdown

https://qwq.ren/posts/add-markdown-support-to-emlog/