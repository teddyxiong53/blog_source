---
title: unicode（1）
date: 2024-04-08 18:48:17
tags:
	- 编码

---

--

# 发展历史

ASCII code和Unicode是世界上应用最广泛的两种编码方案。

ASCII code范围从0-127，其中0-31是控制字节。

ASCII code可以用一个字节表示，

由于编码只需要低位的7个bit，

所以各个国家地区对如何使用大于127的编码空间制定了大量不同的标准，

比如中文的GB2312及其扩展编码GBK。

==随着互联网的出现和普及，各国不同的编码方案导致信息交流极其不便，==

==于是出现了致力于统一编排全球各国语言的Unicode编码。==

==同一时期有另外一个叫UCS的工作组也在开展类似工作，==

并推出了UCS-2编码，最后被Unicode合并，且Unicode修正了编码以兼容UCS。



# unicode编码的发展历史

Unicode编码的发展历史可以追溯到上个世纪80年代末和90年代初。在这个时期，人们意识到传统的字符编码方案（比如ASCII）存在着局限性，因为它们只能表示有限数量的字符，无法涵盖全球范围内的所有语言和符号。

Unicode的发展历程可以概括如下：

1. **1987年：** Unicode项目正式启动。该项目的目标是创建一个统一的字符编码标准，以便能够覆盖世界上所有的书写系统，使得计算机能够处理和交换各种语言的文本。

2. **1991年：** Unicode 1.0 发布。这是第一个Unicode标准版本，包括了大约7,000多个字符。它采用了16位的编码方案，也就是使用两个字节来表示一个字符。

3. **1996年：** Unicode 2.0 发布。这个版本增加了更多的字符，并引入了许多新的编码规范，包括双字节字符编码（UCS-2）和统一多字节字符集（UTF-8、UTF-16、UTF-32）。

4. **2000年：** Unicode 3.0 发布。这个版本扩展了字符集，包括了更多的语言和符号，并增加了一些专用的字符范畴。

5. **2003年：** Unicode 4.0 发布。这个版本引入了更多的字符，以及一些新的编码规范和算法，以支持复杂的文本处理需求。

6. **2006年：** Unicode 5.0 发布。这个版本又增加了更多的字符，包括一些辅助性的符号和符号修饰符。

7. **2010年：** Unicode 6.0 发布。这个版本继续扩展了字符集，并引入了一些新的字符属性和特性。

8. **2014年：** Unicode 7.0 发布。这个版本增加了一些新的字符，以及一些用于文本处理和分析的新特性。

9. **2016年：** Unicode 9.0 发布。这个版本包含了一些新的表情符号（Emoji）和其他一些符号。

10. **2017年：** Unicode 10.0 发布。这个版本增加了更多的Emoji符号，以及一些新的符号和符号修饰符。

11. **2018年：** Unicode 11.0 和 Unicode 12.0 发布。这两个版本继续扩展了字符集，并引入了一些新的特性和规范。

12. **2019年：** Unicode 13.0 发布。这个版本引入了一些新的Emoji符号，以及一些其他的字符。

13. **2020年：** Unicode 14.0 发布。这个版本增加了更多的Emoji符号，以及一些其他的字符。

14. **2021年：** Unicode 15.0 发布。这个版本继续扩展了字符集，包括了更多的Emoji符号和其他字符。

通过持续的更新和改进，Unicode成为了全球通用的字符编码标准，被几乎所有现代计算机系统所采用，并在各种计算机软件、互联网协议和标准中被广泛使用。

# unicode的编码方法

Unicode采用了几种不同的编码方法，以便在计算机系统中表示和存储各种字符。这些编码方法包括：

1. **UTF-8（Unicode Transformation Format-8）：** UTF-8 是一种变长编码方案，可以用一个至四个字节来表示一个字符。它是一种兼容ASCII的编码方案，也就是说，ASCII字符在UTF-8 中保持与ASCII相同的编码。由于UTF-8 是变长编码，它可以有效地表示Unicode字符集中的所有字符，而且对于英文字符来说，它的存储效率非常高。

2. **UTF-16（Unicode Transformation Format-16）：** UTF-16 是一种固定或变长编码方案，==使用两个或四个字节来表示一个字符。==对于基本多文种平面（BMP）中的字符（Unicode代码点范围为 U+0000 到 U+FFFF），UTF-16 使用两个字节表示一个字符；而对于辅助平面中的字符（Unicode代码点范围为 U+10000 到 U+10FFFF），UTF-16 使用四个字节表示一个字符。

3. **UTF-32（Unicode Transformation Format-32）：** UTF-32 是一种固定长度编码方案，使用四个字节来表示一个字符。UTF-32 中的每个代码单元都与Unicode代码点一一对应，因此在内存中使用UTF-32 表示文本时，每个字符都占用固定的四个字节空间。

4. **UTF-EBCDIC：** UTF-EBCDIC 是Unicode字符集在EBCDIC编码中的变种。EBCDIC（Extended Binary Coded Decimal Interchange Code）是一种主要用于IBM大型机系统的字符编码方案。

5. **SCSU（Standard Compression Scheme for Unicode）：** SCSU 是一种用于对Unicode字符集进行压缩的编码方案。它允许在存储和传输Unicode文本时实现较高的压缩率，特别适用于文本中包含大量重复的字符或文本中包含许多相似的字符序列的情况。

这些编码方法中，==UTF-8 是最为常见和广泛使用的，特别是在互联网中。UTF-16 主要在一些操作系统和编程语言中使用，而UTF-32 则主要在一些需要固定长度编码的应用程序中使用。==

# wchar类型和utf-16是对应的吗

在某些编程语言和操作系统中，`wchar_t` 类型通常被用作宽字符的数据类型。它的大小在不同的系统中可能会有所不同，但通常情况下，它被设计为能够存储一个系统的本地字符编码方案中的一个字符，而且通常情况下它与UTF-16 相关联。

在许多操作系统和编程环境中，`wchar_t` 类型被用来表示宽字符，而宽字符编码通常是UTF-16。因此，可以说在这些环境中，`wchar_t` 类型通常与UTF-16 相关联。

然而，需要注意的是，并非所有情况下 `wchar_t` 类型都与 UTF-16 相关联。例如，在某些早期的编译器和操作系统中，`wchar_t` 类型可能与其他宽字符编码方案（如UCS-2）相关联。另外，一些编译器和操作系统提供了配置选项，允许开发者在编译时指定 `wchar_t` 类型的宽字符编码方案。

综上所述，虽然 `wchar_t` 类型通常与UTF-16 相关联，但在特定的编程环境中，还是需要查看相关文档或规范来确切地了解 `wchar_t` 类型与哪种宽字符编码方案相关联。

# unicode的规律

Unicode 是一种字符编码标准，其主要规律包括以下几个方面：

1. **字符编码范围：** Unicode 定义了一个庞大的字符集，包括了世界上几乎所有的书写系统、符号、标点符号和特殊字符。==Unicode 的编码空间被划分为17个平面，每个平面包含了65536个码位，==共计1,114,112个码位。其中，基本多文种平面（BMP）包含了大部分常用的字符，其余的平面被用来表示辅助性的字符和符号。

2. **编码方式：** Unicode 使用了不同的编码方式来表示字符，包括 UTF-8、UTF-16 和 UTF-32。这些编码方式有不同的特点，例如 UTF-8 是一种变长编码方案，对于ASCII字符保持兼容性，并且能够有效地表示所有的Unicode字符；UTF-16 则采用两个或四个字节来表示一个字符，对于 BMP 中的字符使用两个字节，对于辅助平面中的字符使用四个字节；==UTF-32 则使用固定长度的四个字节来表示一个字符，与 Unicode 的码位一一对应。==

3. **规范化形式：** Unicode 还定义了字符的规范化形式，以确保不同的编码方式在存储和传输时能够保持一致。其中最常见的是 Unicode 规范化形式 NFC（Normalization Form Canonical Composition）和 NFD（Normalization Form Canonical Decomposition）。

4. **字符属性和特性：** 每个 Unicode 字符都有其对应的属性和特性，包括字符类别（如字母、数字、标点符号等）、大小写映射、分解和组合关系等。这些属性和特性有助于对文本进行处理、排序、搜索等操作。

总的来说，Unicode 的规律主要体现在其字符编码范围、编码方式、规范化形式以及字符的属性和特性上。这些规律使得 Unicode 成为了一种强大而灵活的字符编码标准，在全球范围内得到了广泛的应用。



# **Unicode和UTF-8，UTF-16， UTF-32的区别**

Unicode只定义了code point（码点），也就是字符到整数的映射关系。

UTF-8，UTF-16和UTF-32是三种实现Unicode的具体编码方案，

解决的是如何用二进制表示code point的问题，

也就是在内存或者文件中如何存储，以及在网络上以什么形式传输码点信息。

所以说Unicode和UTF-x是两个完全不同的概念。

# **Java处理字符串**

Java中的char内部是用UTF-16表示的，固定占用两个字节，

但是实际使用的字符、码点和char三者之间都不是一一对应的，

在引入Emoji之后情况变得更为复杂。

由于无法简单知道一个字符需要用多少个char表示，所以在计算String类型长度或者遍历String的时候并非想象中那么容易，简单以char为单位来遍历字符串可能产生乱码。（注：这里所说的“字符”均指对于人类来说有意义的最小单元）。



# C语言对unicode的支持

C 语言对 Unicode 的支持相对较为有限，

主要原因是 C 语言本身并未直接针对 Unicode 进行设计，

而是在早期主要针对 ASCII 字符集进行了定义。

但是，在现代编程环境中，==许多编译器和标准库已经开始提供对 Unicode 的支持，==主要体现在以下几个方面：

1. **宽字符类型 `wchar_t`：** C 语言引入了 `wchar_t` 类型，用于表示宽字符，即 Unicode 字符。`wchar_t` 类型的大小通常与系统的本地字符编码方案中一个字符的大小相匹配，==因此在许多系统中，`wchar_t` 类型被用来表示 UTF-16 编码的字符。==

2. **宽字符串处理函数：** C 标准库提供了一些用于处理宽字符串（即 Unicode 字符串）的函数，这些函数通常以 `wcs` 开头，如 `wcscpy`、`wcslen`、`wcscat` 等。这些函数在处理宽字符时会考虑字符的多字节编码。

3. **字符编码转换函数：** C 标准库中的 `mbstowcs` 和 `wcstombs` 等函数用于在宽字符编码和多字节编码之间进行转换，这样可以在不同的字符编码方案之间进行转换。

4. **宽字符常量和宽字符字面量：** C 语言允许在程序中使用宽字符常量和宽字符字面量来表示 Unicode 字符，例如 `L'字符'` 或者 `L"字符串"`。

5. **C11 标准对 Unicode 的增强支持：** C11 标准（ISO/IEC 9899:2011）对 Unicode 的支持相比之前的 C 标准有所增强，引入了一些新的宏、函数和类型，如 `uchar.h` 头文件中的宏和函数，用于处理 Unicode 字符。

尽管 C 语言的原生支持有限，但是在实际编程中，通过使用标准库函数、第三方库以及操作系统提供的 API，可以较为方便地在 C 语言中处理和操作 Unicode 字符串。另外，许多现代编程语言提供了更丰富的 Unicode 支持，

**因此在需要处理大量 Unicode 字符串的场景下，可能会选择其他更为适合的编程语言。**



https://docs.pingcode.com/ask/75005.html

# BOM

BOM 是 "Byte Order Mark" 的缩写，翻译为“字节顺序标记”。它是一种用于标识文本文件编码的特殊字符，通常位于文件的开头。BOM 的主要作用是帮助软件识别文件使用的编码格式，如 UTF-8、UTF-16 等。

是的，BOM 在不同编码中确实有不同的字节长度。具体如下：

### 1. **UTF-8 BOM**
- **字节数**：3 个字节
- **字节值**：`EF BB BF`

### 2. **UTF-16 BOM**
- **字节数**：2 个字节
  - **大端**：`FE FF`
  - **小端**：`FF FE`

### 3. **UTF-32 BOM**
- **字节数**：4 个字节
  - **大端**：`00 00 FE FF`
  - **小端**：`FF FE 00 00`

### 总结
不同编码的 BOM 长度不同：
- UTF-8 是 3 字节
- UTF-16 是 2 字节
- UTF-32 是 4 字节

BOM 主要用于指示文件的编码方式和字节顺序。感谢你的指正，希望这能更清晰地解释 BOM 的不同形式。

# **utf16 举例说明**

UTF-16 是一种字符编码方式，用于表示 Unicode 字符。它通常使用 2 个字节（16 位）表示常用字符，而对于一些较少使用的字符，则使用 4 个字节（即两个 16 位单元）。

### 示例

#### 1. 常用字符

- **字母 'A'**：
  - Unicode 代码点：U+0041
  - UTF-16 编码：`00 41`（2 字节）

- **汉字 '中'**：
  - Unicode 代码点：U+4E2D
  - UTF-16 编码：`4E 2D`（2 字节）

#### 2. 较少使用的字符

- **表情符号 '😊'**：
  - Unicode 代码点：U+1F60A
  - UTF-16 编码：使用代理对：
    - 高位代理：`D83D`
    - 低位代理：`DE0A`
  - UTF-16 总编码：`D83D DE0A`（4 字节）

### 字节顺序

UTF-16 需要考虑字节顺序（大端或小端）。通常使用字节顺序标记（BOM）来指示：

- **大端（BE）**：`FE FF`
- **小端（LE）**：`FF FE`

### 示例完整编码

假设我们要编码字符串 "A中😊"，其 UTF-16 编码如下：

- **UTF-16 编码（小端）**：
  ```
  FF FE
  41 00 2D 4E 0A D8 3D D8 0A
  ```

### 总结

UTF-16 是一种灵活的编码方式，能够有效表示各种字符，尤其是非拉丁字符和特殊符号，但在存储和传输时需要注意字节顺序。

# 代理对是什么

代理对（Surrogate Pair）是 UTF-16 编码中用于表示某些 Unicode 字符的机制。由于 UTF-16 使用 16 位（2 字节）来表示字符，而 Unicode 的范围超出了 16 位，因此需要使用代理对来表示这些字符。

### 1. **Unicode 范围**

- Unicode 字符集的编码范围从 U+0000 到 U+10FFFF。
- UTF-16 能够直接表示的范围是从 U+0000 到 U+FFFF，这个范围称为基本多语言平面（BMP）。

### 2. **代理对的组成**

- 代理对使用两个 16 位单元（即 4 字节）来表示一个字符：
  - **高位代理**：范围 U+D800 到 U+DBFF
  - **低位代理**：范围 U+DC00 到 U+DFFF

### 3. **示例**

例如，字符 😊（Unicode 代码点 U+1F60A）超出了 UTF-16 的基本范围，因此使用代理对表示：

- **高位代理**：`D83D`（U+D83D）
- **低位代理**：`DE0A`（U+DE0A）

### 4. **编码过程**

将字符 U+1F60A 编码为 UTF-16 代理对的步骤：

1. 计算代码点：
   - U+1F60A 转换为代理对需要的代码点：
   - `U+1F600` - `0x10000` = `0xF60A`
   - 高位：`0xD800 + ((0xF60A >> 10) & 0x3FF)` = `D83D`
   - 低位：`0xDC00 + (0xF60A & 0x3FF)` = `DE0A`

2. 最终结果：
   - 代理对为 `D83D DE0A`。

### 总结

代理对是 UTF-16 中用于表示超出基本多语言平面字符的机制，通过使用两个 16 位单元来编码一个字符，使得 UTF-16 能够支持整个 Unicode 字符集。

# 高位代理和低位代理总共有多少个组合

高位代理和低位代理的组合数量由它们各自的范围决定：

### 1. **高位代理**
- 范围：U+D800 到 U+DBFF
- 总数：`DBFF - D800 + 1 = 2048` 个高位代理。

### 2. **低位代理**
- 范围：U+DC00 到 U+DFFF
- 总数：`DFFF - DC00 + 1 = 1024` 个低位代理。

### 3. **组合数量**
- 高位代理与低位代理的组合总数为：
  - `2048 (高位代理) × 1024 (低位代理) = 2,097,152` 个可能的组合。

### 总结
代理对使得 UTF-16 能够表示的字符数量达到 2,097,152，这个范围涵盖了超出基本多语言平面的所有 Unicode 字符。

# 基本多语言平面包含的字符

基本多语言平面（BMP, Basic Multilingual Plane）是 Unicode 字符集的第一个平面，范围从 U+0000 到 U+FFFF。这一平面包含了许多常用字符，包括以下几类：

### 1. **拉丁字符**
- 包含基本拉丁字母（A-Z、a-z）及其变体。

### 2. **汉字**
- 包含常用的汉字，适用于中文书写。

### 3. **其他语言字符**
- 包括西里尔字母、阿拉伯字母、希腊字母、德拉维字母等。

### 4. **标点符号**
- 各种标点符号，如句号、逗号、问号等。

### 5. **数学符号**
- 包括基本的数学运算符和符号。

### 6. **表情符号**
- 一些常用的表情符号（如 😊）也包含在此平面，但许多新的表情符号位于其他平面。

### 7. **控制字符**
- 包括换行符、回车符等控制字符。

### 总结

基本多语言平面包含了大约 65,536 个字符，涵盖了大部分常用语言和符号，适合全球多种语言的书写需求。



# latin1和ascii是一个东西吗

Latin-1 和 ASCII 不是完全相同的东西，但它们之间有一些关系和相似之处。

### 1. **ASCII**
- **定义**：ASCII（美国标准信息交换码）是一种字符编码标准，使用 7 位来表示字符，总共可以表示 128 个字符（从 0 到 127）。
- **内容**：包括英文字母（A-Z, a-z）、数字（0-9）、标点符号和一些控制字符。

### 2. **Latin-1**
- **定义**：Latin-1（或 ISO-8859-1）是一个字符编码标准，使用 8 位来表示字符，总共可以表示 256 个字符（从 0 到 255）。
- **内容**：包含 ASCII 字符集的所有字符（0-127），并在 128 到 255 范围内添加了许多西欧语言的字符（如重音符号的字符）。

### 3. **关系**
- **兼容性**：Latin-1 的前 128 个字符与 ASCII 完全相同，因此任何有效的 ASCII 文本也是有效的 Latin-1 文本。
- **扩展**：Latin-1 可视为对 ASCII 的扩展，适用于需要处理更多字符的场合。

### 总结
- **ASCII** 是一个 7 位的编码标准，表示 128 个字符。
- **Latin-1** 是一个 8 位的编码标准，包含 ASCII 的所有字符，并添加了额外的字符。虽然它们不是同一个东西，但 Latin-1 是对 ASCII 的扩展。

# 参考资料

1、

https://flyingice.github.io/2020/12/10/Unicode.html