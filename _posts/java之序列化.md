---
title: java之序列化
date: 2017-12-28 11:43:16
tags:
	- java

---



看java的代码里，有serialVersionUID这个东西。下面梳理一下相关内容。



java序列化是用来保存内存中各种对象的状态的。当然你可以自己用各种方法来保存Object States，但是java已经给你提供了一套现成的。

# 序列化的基本含义

是指把结构化的对象变成无结构的字节流，方便传输和存储。

一个类只要实现了Serializable接口，这个类的对象就可以被序列化。



# 什么时候需要序列化？

1、当你想把内存中的对象保存到文件或者数据库的时候。

2、当你想用socket在网络上传送对象时。

3、当你想通过RMI传输对象的时候。

# 当你对一个对象实现序列化的时候，发生了什么？

在没有序列化前，每个保存在Heap里的对象都有相应的state。例如：

```
Foo myFoo = new Foo();
myFoo.setH(10);
myFoo.setW(20);
```

现在我们用下面的代码进行序列化：

```
FileOutpuStream fs = new FileOutputStream("foo.ser");
ObjectOutputStream os = new ObjectOutputStream(fs);
os.writeObject(myFoo);
```

当上面的代码执行完之后，myFoo这对象的相关属性都被保存起来了。你再次从文件中把它读取出来后，所有属性都恢复到保存时的样子。

# serialVersionUID跟序列化的关系是什么？

1、一个类要实现序列化和反序列化，不生命serialVersionUID也可以的。

2、serialVersionUID是用来辅助序列化的。

3、在进行序列化和反序列化的时候，只有serialVersionUID一样，反序列化才能成功。

例如我们在这台电脑上进行了序列化，传输给另外一台电脑，另外一台电脑上相关类的版本不一致（这个是通过比较serialVersionUID得到的），则肯定无法正确进行反序列化的。



# 使用场景

序列化和反序列化是将数据在不同格式之间进行转换的过程，其中序列化将数据转换为可存储或传输的格式，而反序列化则将其转换回原始数据形式。

以下是一些常见的使用场景：

1. 数据持久化：将对象或数据结构序列化为文件或数据库中，以便后续读取和使用。
2. 网络传输：将数据序列化为网络传输所需的格式，如JSON、XML等，以便在不同系统间进行通信和数据交换。
3. 缓存：将数据序列化后存储在缓存中，以便在需要时快速检索，减少数据库查询等操作。
4. 分布式计算：在分布式系统中，将任务的输入和输出序列化后进行传输和处理。
5. 远程过程调用（RPC）：将函数调用及其参数序列化后发送到远程服务器执行，并将结果反序列化返回。
6. 数据传输和存储压缩：序列化可以减少数据的大小，从而节省网络传输带宽和存储空间。
7. 单元测试和调试：在测试和调试过程中，可以将对象序列化为文本或其他格式，以便更好地检查和分析数据。

总之，序列化和反序列化在许多场景中都非常有用，可以方便地处理数据的存储、传输和处理。Python提供了多种序列化和反序列化的工具和库，如pickle、json、XML解析库等，开发人员可以根据具体需求选择合适的工具进行操作。