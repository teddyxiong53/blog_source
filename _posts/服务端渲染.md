---
title: 服务端渲染
date: 2021-02-02 16:17:11
tags:
	- express

---

--

什么是服务端渲染？

为什么需要服务端渲染？优化首屏速度，对seo友好。

怎样进行服务端渲染？服务端模拟浏览器运行一次，得到一个快照缓存，可以让用户获取和让搜索引擎爬虫爬取。



现在的服务端渲染和过去的服务端渲染完全是两码事。什么叫“又流行”？说明看问题太浅薄。

以前的服务器渲染，是以“文档”为核心思想。

服务器端的逻辑是把HTML, CSS, Javascript当作一个静态文件，

对“文档”而言不存在“指令”和“数据”的区别，一切都是数据。

所以我们可以看到服务器渲染，

GET就是请求一个文件，

而web 1.0时代的诸多服务端框架最基础的组件之一就是文档模版，

比如asp, JSP之类，

核心设计理念就是**HTML文件里放占位符**，然后由服务端逻辑替换成实际数据后一股脑返回。



现在划重点：

**Web 2.0时代最大的思想革命本质不是前后端分离，**

**而是把网页当作独立的应用程序（app）。**

**前后端分离只是实现这一新架构的必然结果。**

对程序而言指令和数据是分离的。

HTTP GET拿到的不是渲染后的网页，

**而是一个由html和Javascript组成的app,**

 **这个app以浏览器为虚拟机。**

装载和显示数据是app启动之后的运行逻辑。

传统上app叫什么？

叫Client，也就是前端。

于是前后端就这么分离了，

浏览器变成了app的运行环境，

后端蜕化成了单纯的业务逻辑和数据接口。

写Javascript不再是给网页添特效的小伎俩，

而是正经的和写桌面应用程序一样的工程。

**于是我们看到了前端工程化，**

编译（转译），各种MVC/MVVM框架，依赖工具，等等。

很新鲜吗？

不新鲜，都是传统桌面开发玩剩下的。

我很早就说过，前端NodeJS的那堆东西，什么npm，Babel，Webpack，gulp，各个框架的cli... 

**本质上就是开源社区东拼西凑做一个Visual Studio。**



那么现在怎么叫“又流行”服务端渲染了？

走老路吗？

当然不可能，

**模版式的服务端编程早就进了垃圾堆。**

我们公司的后端实现甚至都不加载HTML模版引擎，

进出的数据都是JSON

（HTML/Javascript内容怎么办？单独编译，然后部署到S3上）

现在的服务器渲染的目的**只是为了**加速和搜索引擎优化（准确的说是非Google引擎优化，因为Google可以解析Javascript动态网页）。

而实现也很简单：

**拿个浏览器核心跑一下app然后把生成的html存起来给搜索爬虫就行了。**

**与其说是渲染，不如说是“快照”，就像给app截图一样。**

历史是螺旋上升的，有相似性但更重要的是进步。







这是 Nuxt 最受欢迎的模式。使用 SSR（也称为 "universal" 或 "isomorphic" 模式），将使用 Node.js 服务器将基于 Vue 组件的 HTML 传递给客户端，而不是纯 JavaScript。与传统的 Vue SPA 相比，使用 SSR 将带来更大的 SEO 提升，更好的用户体验和更多的机会。

由于单独实施 SSR 可能非常繁琐，因此 Nuxt.js 可为您提供全面的支持，并将处理常见的缺陷。



参考资料

1、为什么现在又流行服务端渲染html？

https://www.zhihu.com/question/59578433