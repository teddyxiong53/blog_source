---
title: chatgpt之prompt编写方法
date: 2023-07-02 20:34:51
tags:
	- chatgpt

---

--

# 资源收集

## 1个Prompt框架+4个公式，讲清产品经理如何用ChatGPT让工作效率翻倍

https://www.woshipm.com/pmd/5802132.html

结合上述框架，我总结一个写文案/文档的 Prompt 参考公式：

> 【**背景**：产品/项目介绍】+【**指令**：撰写/修改 + 文案/文档类型】+【**输入数据**：模仿对象内容/修改内容（可选）】+【**输出指示**：关于主题/产品的要点 + 结构/字数等】

# **编写prompt的原则**

- **原则 1: 编写清晰、具体的指令**
- **原则 2: 给模型些时间思考**

编写清晰的指令不意味着简短的指令，因为在许多情况下，更长的提示指令(Prompt)实际上更清晰且提供了更多上下文。这实际上可能带来更详细、更相关的输出。具体可以通过以下一些策略来实现。

## **原则1：编写清晰、具体的指令**

### **策略 1: 利用分隔符清晰地表示输入的不同部分**

使用**分隔符**能够有助于清晰地表示**输入的不同部分**，分隔符可以是：```，""，<>，<tag>，<\tag>等。

可以使用任何明显的标点符号将特定的文本部分与提示的其余部分分开。

通过这个标记符号可以使模型明确知道这是一个单独部分。

**此外使用分隔符可以避免Prompt注入。**

Prompt注入是指如果用户将某些输入添加到Prompt中，则可能会向模型提供与原本想要执行的操作相冲突的指令，从而使其遵循冲突的指令而不是执行真正想要的操作。

比如输入里面可能包含其他指令，会覆盖掉真正要执行的指令。

### **策略 2: 结构化输出**

结构化输出可以是 Json、HTML 等格式。这可以使模型的输出更容易被解析，例如可以在 Python 中将其读入字典或列表中。

```
生成三个虚构的书名，包含标题、作者和类别。\
以JSON格式输出，key如下：book_id, title, author, genre。value部分用中文表示。
```

### **策略 3: 要求模型检查是否满足条件**

任务执行的前提假设可能不满足，可以要求模型先检查这些假设，

如果不满足，停止执行指令。

还可以考虑潜在的边缘情况以及模型应该如何处理这些边缘情况，以避免意外的错误或结果。

### **策略 4: "Few-shot" prompting**

Few-shot prompting是在模型执行实际任务之前，提供给它少量待执行任务的示例。

```
你的任务是以一致的风格回答。

<孩子>：教我耐心。\
<祖父>：刻出最深峡谷的河流,源于一泓不起眼的泉水;最宏伟的交响乐，起源于单一的音符;最复杂的挂毯,始于孤独的一根线。\
<孩子>：教我韧性。
```

## **原则 2: 让模型去思考**

### **策略 1: 指定完成任务所需的步骤**

如果模型匆忙得出错误的结论，那么我们应该尝试重新构思Prompt，

要求模型在提供最终答案之前进行一系列相关的推理。

换句话说，如果我们给模型一个在短时间或用少量文字无法完成的任务，那么它可能会错误回答。

这种情况对人来说也一样。

对于复杂的数学问题，如果让某人在没有足够时间去计算而得到的答案，也可能是错的。

因此，在这些情况下，我们可以指示模型花更多时间思考问题，这意味着它在任务上花费了更多的计算资源。

先给这样一段话：

```
在一个迷人的小村庄里，\
兄弟姐妹杰克和吉尔踏上了一段从山顶井取水的任务。\
当他们欢快地唱着歌爬上山时，\
不幸降临了——杰克绊倒在一块石头上，\
沿着山坡滚下去，吉尔也随之跟着滚了下来。\
尽管稍微受了点伤，这对兄妹还是回到了家中，\
得到了温暖的拥抱。尽管发生了这个不幸的意外，\
他们的冒险精神依然没有减退，他们继续愉快地探索着。
```

然后继续给出任务：

```
你的任务是执行以下操作：
1- 用一句话概括用<>括起来的文本。
2- 将摘要翻译成英语。
3- 列出英语摘要中的每个人名。
4- 输出一个JSON对象，其中包含以下键: eng_summary, num_names.

使用以下格式：
文本：<要概括的文本>
摘要：<概述>
翻译：<概述的翻译>
名称：<英语摘要中的人名列表>
输出JSON：<带有 eng_summary和num_names的JSON对象>
```

### **策略 2: 要求模型在下结论之前看看自己的解法**

有时候，在明确指导模型在做决策之前先思考解决方案时，会得到更好的结果。

接下来我们会给出一个问题和一个学生的解答，要求模型判断解答是否正确。



# 另外一篇文章总结

## 一、第一原则：明确的意图

你需要**明确地表达**你的意图和要求，尽可能具体、描述性、详细地描述所需的上下文、你期望的结果等。你的要求越明确，越有希望获得你想要的答案。

糟糕的案例 ❌

> 写一首关于OpenAI的诗。

更好的案例 ✅

> 以莎士比亚的风格写一首短小的、鼓舞人心的诗，重点关注最近DALL-E产品推出（DALL-E是一种文本到图像的ML模型）的事情。

上面的例子明确提出了几点要求：

1. 以莎士比亚的风格
2. 短小的、鼓舞人心的
3. 跟 DALL-E 产品相关的

由于 ChatGPT 只掌握了 2021 年的知识，可能不知道 DALL-E 是什么，我们还在 prompt 里简单解释了 DALL-E，帮他理解模棱两可的概念。

## 二、理解 Prompt 的主要构成

Prompt 的主要构成有：

- **Instruction 指令**：您想让模型执行的特定任务或指令
- **Context 上下文**：可以涉及外部信息或附加上下文，可以引导模型产生更好的响应
- **Input Data 输入数据**：我们感兴趣的输入或问题（以期望 ChatGPT 给出解答）
- **Output Indicator 输出提示**：表示希望 ChatGPT 以什么形式来输出结果

## 三、一些 Prompt 的优化迭代技术

使用以下的方法，不断地优化你的 prompt。

### 1). 框选你想表达的重点信息

使用 `###` 或 `"""` 等符号框选重点信息。使用符号来断开不同类型的内容会显著提升 ChatGPT 对内容的理解能力。

你就理解背后是python在执行代码，它容易理解接受三引号框起来的部分。

### 2). 指定结果的输出格式

当你期望 ChatGPT 的输出内容具有一定结构时，把你的期望表达出来。

### 3). “Act as” trick 确定 ChatGPT 的立场

针对一些问题，尤其是开放性问题。整个互联网可能存在上百甚至上千万中答案，为 ChatGPT 设定立场有助于它找到最符合自己人设（也最符合你需要的）一种答案。

### 4). Few-shot 教教他，给 ChatGPT 一些案例

### 5). 减少模糊的表达，明确提出你的需求



### 6). 告诉他要做什么，而不是不要做什么

### 7). “Step by Step” trick，帮助 ChatGPT 做推理

也叫做：Chain-of-Thought Prompting。

实验证明，在应对 zero-shot 问题时，你在问题最后加上“Let’s think step by step”，ChatGPT “显性的推理能力”会得到明显提升。这个就不多展开了，感兴趣的朋友可以看看这篇参考文章：[Prompt learning 系列之 Let’s think step by step](https://zhuanlan.zhihu.com/p/527423190)



# 参考资料

1、

https://zhuanlan.zhihu.com/p/638211818

2、

https://jerryzou.com/posts/how-to-write-a-prompt-for-chatgpt/