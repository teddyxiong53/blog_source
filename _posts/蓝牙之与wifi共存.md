---
title: 蓝牙之与wifi共存
date: 2020-06-22 10:33:49
tags:
	- 蓝牙

---

--

看rk3308的启动时，有这样的打印：

```
Jan  1 08:00:13 rockchip user.info kernel: [   13.795964] rtk_btcoex: Open BTCOEX
Jan  1 08:00:13 rockchip user.info kernel: [   13.796031] rtk_btcoex: create_udpsocket: connect_port: 30001
Jan  1 08:00:13 rockchip user.info kernel: [   13.796100] rtk_btcoex: send msg INVITE_REQ with len:11
Jan  1 08:00:13 rockchip user.info kernel: [   13.798746] rtk_btcoex: BTCOEX hci_rev 0xaa89
Jan  1 08:00:13 rockchip user.info kernel: [   13.798800] rtk_btcoex: BTCOEX lmp_subver 0x7e1b
```

rtk_btcoex这个是什么意思？

搜索了一下，发现coex是coexist的缩写。表示共存。

这个表示wifi和蓝牙的共存功能。

需要这个功能，是因为单芯片的wifi蓝牙，二者共用了天线。

这就需要wifi和蓝牙通过一定的机制来合理共用天线。

共存机制的原理，是一个比较简单的机制：WiFi监听BT的工作状态，根据BT的工作状态来切换自己使用射频天线的时隙。



# 简介

蓝牙和Wi-Fi的共存问题是指它们在相同频段上运行时可能会相互干扰，

从而影响通信质量和性能。

这主要是因为蓝牙和Wi-Fi都使用2.4 GHz频段进行通信，

并且采用类似的调制和频率跳频技术，

导致它们在同一空间内同时工作时可能产生干扰。

以下是蓝牙和Wi-Fi共存问题的一些方面：

1. **互相干扰**：蓝牙和Wi-Fi设备在相同频段上工作时，它们的信号可能会相互干扰，导致通信质量下降，数据传输速率降低，甚至造成连接中断。

2. **共存机制**：为了解决共存问题，蓝牙和Wi-Fi设备通常会采用一些共存机制，如频率跳变、功率控制、时间分配等，以减少互相干扰，提高通信稳定性。

3. **信号穿透**：蓝牙和Wi-Fi信号在空间中传播时，它们的干扰范围可能会相互重叠，特别是在信号较弱的边缘区域，可能会出现信号穿透和干扰增强的情况。

4. **干扰源识别**：对于蓝牙和Wi-Fi设备之间的干扰问题，需要进行干扰源的识别和分析，以确定具体的干扰来源，并采取相应的调整和优化措施。

为了解决蓝牙和Wi-Fi的共存问题，可以采取以下措施：

- **频谱管理**：合理规划和管理蓝牙和Wi-Fi设备的频谱使用，避免频谱冲突和重叠。

- **信道选择**：选择合适的蓝牙和Wi-Fi信道，避免信道冲突和干扰。

- **信号调整**：根据实际情况调整蓝牙和Wi-Fi设备的信号功率和传输速率，以减少互相干扰。

- **物理隔离**：在可能的情况下，将蓝牙和Wi-Fi设备进行物理隔离，减少信号干扰。

通过以上措施，可以有效减少蓝牙和Wi-Fi设备之间的干扰，提高它们的共存性和通信质量。



# 参考资料

1、Android平台上的WiFi BT共存机制

https://www.cnblogs.com/hunaiquan/p/5416105.html