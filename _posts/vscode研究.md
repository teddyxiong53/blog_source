---
title: vscode研究
date: 2024-03-01 11:43:17
tags:
	- IDE

---

--



https://metaso.cn/search/8451749631201652736

# 从 VSCode 看大型 IDE 技术架构

https://cloud.tencent.com/developer/news/565148

# VSCode 工程技术分析

https://wuyanxin.com/post/vscode-engineering-technology.html

# VSCode技术解析与实践

https://codeteenager.github.io/vscode-analysis/

# 简介

Visual Studio Code（简称VS Code）是一款由微软开发的免费开源的代码编辑器，它支持多种编程语言，并提供了丰富的功能和插件生态系统。VS Code是一款轻量级但功能强大的编辑器，适用于开发各种类型的应用程序，包括Web应用、移动应用和桌面应用等。

VS Code具有以下特点：

1. **跨平台性**: 可在Windows、macOS和Linux上运行。
2. **丰富的功能**: 提供了代码高亮、智能代码补全、代码导航、调试支持、版本控制等功能。
3. **强大的扩展生态系统**: 通过安装扩展，可以为VS Code添加各种功能和工具，满足不同开发需求。
4. **集成终端**: 内置终端功能，可直接在编辑器中执行命令。
5. **内置调试器**: 支持多种语言的调试，包括JavaScript、TypeScript、Python等。
6. **快速启动和轻量级**: 启动速度快，占用系统资源少。

总的来说，VS Code是一款非常流行的现代化代码编辑器，受到了广泛的开发者社区的欢迎和支持。

# 发展历史

Visual Studio Code的发展历史可以追溯到2011年微软发布了一个名为"Monaco"的Web编辑器。Monaco最初是为Azure服务中的"Visual Studio Online"（现在称为Azure DevOps）开发的，用于在Web浏览器中编辑代码。

后来，微软基于Monaco开发了一个独立的开源项目，这就是Visual Studio Code。2015年4月，微软在Build开发者大会上正式发布了Visual Studio Code。它的发布引起了广泛关注，因为它是一款轻量级的跨平台代码编辑器，适用于多种开发场景。

随着时间的推移，Visual Studio Code持续得到改进和扩展。微软和开源社区不断地为其添加新功能、修复漏洞，并且提供了丰富的插件生态系统，使得开发者可以根据自己的需求定制编辑器。VS Code迅速成为了最受欢迎的代码编辑器之一，得到了全球开发者的广泛使用。

至今，Visual Studio Code仍然活跃地开发和更新，每个月都会发布新版本，以满足不断变化的开发需求，并继续改善用户体验。

# vscode的开发节奏

Visual Studio Code的开发节奏非常活跃，

通常每个月都会发布一个新版本，

每个版本都包含了一系列新功能、改进和修复。

这种频繁的发布周期使得开发者能够快速获取到最新的功能和改进，从而提高开发效率和体验。

在每个版本的开发周期中，微软和VS Code团队会与开源社区合作，收集用户反馈和建议，并根据这些反馈不断改进和完善编辑器。

他们也会积极参与开源社区，与开发者一起解决bug、开发新功能和改进现有功能。

除了正式版本的发布之外，VS Code还提供了Insiders版本，该版本提供了最新的开发版本，让用户可以提前体验即将发布的新功能，并及时反馈问题和建议。这种开发节奏使得VS Code保持了与开发者社区的紧密联系，不断适应和满足开发者的需求。

# vscode的技术栈

Visual Studio Code的技术栈主要包括以下几个关键部分：

1. **Electron**: Visual Studio Code是基于Electron框架构建的，Electron是一个跨平台的桌面应用程序开发框架，它允许使用Web技术（HTML、CSS和JavaScript）构建原生的桌面应用程序。通过Electron，VS Code能够在Windows、macOS和Linux等多个操作系统上运行。

2. **Chromium**: Electron使用Chromium作为其核心渲染引擎，Chromium是Google Chrome浏览器的开源版本，它提供了现代化的Web技术支持，包括HTML5、CSS3和JavaScript的最新特性。

3. **TypeScript**: Visual Studio Code的大部分代码是使用TypeScript编写的，TypeScript是JavaScript的一个超集，它添加了静态类型检查和其他新特性，有助于提高代码的可靠性和可维护性。

4. **Node.js**: Visual Studio Code的后端和插件系统都是基于Node.js构建的，Node.js是一个基于Chrome V8引擎的JavaScript运行时环境，它允许使用JavaScript编写服务器端代码，并提供了丰富的包管理器npm，用于管理依赖项和插件。

5. **Monaco Editor**: Visual Studio Code内置了一个名为Monaco的代码编辑器，它是一款基于Web技术的高性能代码编辑器，具有代码高亮、智能代码补全、语法检查、代码导航等功能，是VS Code编辑器的核心组件之一。

通过这些关键技术的结合，Visual Studio Code实现了一款功能强大、跨平台、高性能的现代化代码编辑器，并得到了全球开发者的广泛认可和使用。

# 怎样深入掌握vscode的使用技巧

要深入掌握Visual Studio Code的使用技巧，可以考虑以下几个途径：

1. **官方文档和教程**: Visual Studio Code的官方文档提供了详细的介绍和教程，包括快捷键、功能说明、常见问题解答等。阅读官方文档是了解VS Code功能和使用技巧的良好起点。

2. **在线资源和社区**: 在线资源和社区是学习和掌握VS Code技巧的宝库，可以通过搜索引擎找到各种博客文章、视频教程、社区论坛等，其中不乏许多专门针对VS Code的技巧和技术分享。

3. **实践和尝试**: 通过实际的使用和尝试，深入了解VS Code的各种功能和操作方式。可以尝试使用不同的快捷键、插件和扩展，探索VS Code的强大功能。

4. **定制化和个性化设置**: Visual Studio Code提供了丰富的个性化设置选项，可以根据自己的习惯和需求进行定制化，例如调整主题、字体、快捷键等，以提高工作效率。

5. **插件和扩展**: 利用VS Code丰富的插件生态系统，安装和使用各种插件和扩展，扩展编辑器的功能和特性，满足不同开发场景的需求。

6. **与他人交流**: 与其他使用VS Code的开发者交流和分享经验，可以通过社区论坛、技术社交平台、线下活动等途径，获取他人的使用技巧和建议，共同进步。

综上所述，通过结合官方文档、在线资源、实践、个性化设置、插件和社区交流等多种途径，可以全面深入地掌握Visual Studio Code的使用技巧，并不断提高自己的编辑器技能水平。

# vscode兼容编辑器

https://github.com/eclipse/openvsx/

这个是给vscode兼容编辑器提供插件的。

# 实现一个lsp

以bash的lsp为例看看。

https://github.com/bash-lsp/bash-language-server

# vscode 快捷键的规律

Visual Studio Code的快捷键设计遵循一些常见的规律，这使得用户可以更轻松地记忆和使用它们。以下是一些常见的快捷键规律：

1. **组合键的一般规律**：
   - 大多数快捷键以一个或多个修饰键（如Ctrl、Alt、Shift）加上一个字母键组成，例如Ctrl+C或者Ctrl+Shift+P。
   - 修饰键的选择通常是为了避免与其他功能冲突，并且通常与所执行的操作相关。
   - 修饰键组合顺序通常按照常见的使用顺序和操作逻辑排序。

2. **快捷键的功能分组**：
   - 类似功能的快捷键通常使用相似的组合，这有助于用户记忆和使用。
   - 例如，==与编辑相关的操作通常使用Ctrl键作为修饰键==，如Ctrl+C用于复制、Ctrl+X用于剪切、Ctrl+V用于粘贴等。

3. **快捷键的记忆规律**：
   - 一些常见的操作和命令可能有直观的快捷键，比如Ctrl+S用于保存文件、Ctrl+Z用于撤销操作等，这使得用户更容易记住这些快捷键。

4. **快捷键的可配置性**：
   - Visual Studio Code允许用户自定义快捷键，用户可以根据自己的习惯和需求修改和添加快捷键，这使得快捷键的使用更加灵活和个性化。

总的来说，Visual Studio Code的快捷键设计旨在使用户能够轻松地记忆和使用它们，同时保持一定的逻辑性和规律性。通过熟悉常见的快捷键组合和操作逻辑，用户可以更加高效地使用编辑器进行编码和其他操作。

## 以ctrl + K 开头的快捷键

在Visual Studio Code中，以`Ctrl + K`开头的快捷键通常用于组合快捷键，其后跟着其他按键组成完整的快捷键序列。以下是一些常见的以`Ctrl + K`开头的快捷键：

1. **Ctrl + K, Ctrl + S**：保存所有文件。这个组合键的作用是保存所有当前打开的文件，而不仅仅是当前激活的文件。

2. **Ctrl + K, Ctrl + W**：关闭当前编辑器。按下这个组合键会关闭当前的编辑器窗口。

3. **Ctrl + K, Ctrl + C**：注释选中代码。这个组合键会注释选中的代码行，如果没有选中任何代码，则注释当前光标所在的行。

4. **Ctrl + K, Ctrl + U**：取消注释选中代码。这个组合键会取消选中代码行的注释，如果没有选中任何代码，则取消注释当前光标所在的行。

5. **Ctrl + K, Ctrl + P**：打开上一个编辑器组。这个组合键会切换到当前编辑器组中的上一个编辑器。

6. **Ctrl + K, Ctrl + N**：打开下一个编辑器组。这个组合键会切换到当前编辑器组中的下一个编辑器。

这些快捷键都是通过按下`Ctrl + K`，然后再按下另一个按键来触发的，它们提供了一种方便的方式来执行常见的操作。通过熟悉这些快捷键，可以提高在Visual Studio Code中的工作效率。

# Emmet用法

Emmet 是一种快速编写 HTML 和 CSS 的工具，

它在 Visual Studio Code 中得到了很好的支持。

Emmet 可以通过简单的缩写生成大量的 HTML 和 CSS 代码，极大地提高了编码效率。

以下是一些常见的 Emmet 用法示例：

1. **HTML 缩写**：
   - 输入 `html:5` 并按下 `Tab` 键，将会生成一个基本的 HTML5 模板。
   - 输入 `div` 并按下 `Tab` 键，将会生成一个 `<div></div>` 标签。

2. **带 ID 和类的标签**：
   - 输入 `div#container` 并按下 `Tab` 键，将会生成一个带有 ID 的 `<div>` 标签：`<div id="container"></div>`。
   - 输入 `div.container` 并按下 `Tab` 键，将会生成一个带有类的 `<div>` 标签：`<div class="container"></div>`。

3. **子元素**：
   - 输入 `ul>li*3` 并按下 `Tab` 键，将会生成一个包含三个 `<li>` 的 `<ul>` 列表。
   - 输入 `ul>li.item$*3` 并按下 `Tab` 键，将会生成一个包含三个 `<li>` 的 `<ul>` 列表，并且每个 `<li>` 的类名为 `item1`、`item2` 和 `item3`。

4. **相邻元素**：
   - 输入 `div+p+bq` 并按下 `Tab` 键，将会生成一个 `<div>`、一个 `<p>` 和一个 `<blockquote>`，它们依次相邻。

5. **父子组合**：
   - 输入 `header>h1{Hello World}` 并按下 `Tab` 键，将会生成一个 `<header>`，其中包含一个 `<h1>`，文本内容为 `Hello World`。

6. **CSS 缩写**：
   - 输入 `bgc:red` 并按下 `Tab` 键，将会生成 `background-color: red;`。
   - 输入 `m10` 并按下 `Tab` 键，将会生成 `margin: 10px;`。

以上是一些常见的 Emmet 用法示例，Emmet 的功能非常强大，可以大大提高编写 HTML 和 CSS 的效率。你可以在 Visual Studio Code 中尝试这些示例，并根据自己的需求和习惯，灵活运用 Emmet 来加速编码过程。

# vscode LSP原理说明

LSP（Language Server Protocol）是一种通信协议，

用于客户端（如 Visual Studio Code）和语言服务器之间的通信。

语言服务器负责分析和处理源代码，

提供与语言相关的功能，

如语法检查、代码补全、跳转到定义等。

而客户端则负责向语言服务器发送请求，并将结果展示给用户。

LSP 的工作原理可以简单概括如下：

1. **客户端与语言服务器的通信**：
   - 客户端启动时会与语言服务器建立通信通道，可以是进程间通信、Socket 连接等方式。
   - 通信通道的建立后，客户端和语言服务器之间开始交换数据。

2. **语言服务器的分析和处理**：
   - 语言服务器接收客户端发送的请求，根据请求的内容，对源代码进行分析和处理。
   - 分析和处理的内容可以包括语法解析、语义分析、代码生成等，取决于语言服务器支持的功能和能力。

3. **语言服务器的响应**：
   - 语言服务器根据请求的内容生成相应的响应结果，通常是一个包含所需信息的 JSON 对象。
   - 响应结果可以是语法错误信息、代码建议、符号定义等。

4. **客户端的展示和处理**：
   - 客户端接收语言服务器发送的响应结果，根据结果将相关信息展示给用户，例如在编辑器中显示错误、代码建议等。
   - 客户端也可以对响应结果进行进一步的处理，如根据用户的选择执行相应的操作。

LSP 的优点在于它将语言相关的功能从编辑器中解耦出来，使得各种编辑器和 IDE 可以共享同一个语言服务器，从而实现了跨平台和跨工具的统一的语言支持。这种标准化的通信协议使得语言服务器的开发更加容易，并且为用户提供了更好的开发体验。

## language server运行在哪里？

语言服务器（Language Server）运行在独立的进程中，

它可以是一个单独的可执行文件或者一个特定语言（如JavaScript、Java等）编写的程序。

语言服务器独立于任何特定的编辑器或集成开发环境（IDE），

它只负责处理语言相关的功能，

并提供一个符合 Language Server Protocol（LSP）规范的通信接口。

语言服务器通常由语言的开发者或社区开发，

并由编辑器或 IDE 的开发者集成到其相应的开发工具中。

在 Visual Studio Code 中，语言服务器通常是作为插件或者扩展的形式提供的，

用户可以通过安装相应的插件来使用语言服务器提供的功能。

==一旦用户在编辑器中打开了一个支持语言服务器的文件（如Python文件），==

==编辑器会自动启动语言服务器，并与其建立通信通道。==

语言服务器会在一个独立的进程中运行，

并通过语言服务器协议（Language Server Protocol）与编辑器进行通信，

从而为用户提供语言相关的功能，如代码补全、语法检查、跳转到定义等。

总之，语言服务器通常是由语言的开发者或社区提供的，独立运行在一个进程中，

并由编辑器或 IDE 的开发者集成到其相应的开发工具中，为用户提供语言相关的功能支持。

# vscode的每一个插件都是一个独立的进程吗

不是，每一个 Visual Studio Code 插件==并不一定==都是一个独立的进程。

实际上，插件的运行方式取决于插件本身的设计和功能。

一些简单的插件可能会在与 Visual Studio Code 主进程相同的进程中运行，

这些插件的功能相对简单，对系统资源的消耗也比较小。

这样的插件通常执行一些简单的操作，如对编辑器的状态进行监听、处理用户输入等。

但是，一些复杂的插件可能会在单独的进程中运行，这些插件可能需要执行比较复杂的任务，

如语言服务器、调试器等。

这样的插件需要更多的系统资源，因此运行在单独的进程中，这样可以提高系统的稳定性和性能。

总的来说，插件的运行方式取决于插件的功能和设计，一些简单的插件可能在与 Visual Studio Code 主进程相同的进程中运行，而一些复杂的插件可能会在单独的进程中运行。