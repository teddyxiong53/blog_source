---
title: 蓝牙之ble应用场景
date: 2018-12-13 16:59:35
tags:
	- 蓝牙

---

--

# ble跟经典蓝牙的优势

ble模块相比于传统蓝牙，特点是：

1、成本低。

2、功耗低。

3、实时性要求高。

4、数据少。



相比传统蓝牙，ble增加了广播。

# 一个智能手环的ble功能描述

智能手环通常具有多种 BLE 功能，以提供健康监测、通知、远程控制等服务。以下是一个典型智能手环的 BLE 功能描述：

### BLE 功能描述

1. **设备信息服务（Device Information Service）**
   - **UUID**：`0000180a-0000-1000-8000-00805f9b34fb`
   - **功能**：提供设备的基本信息，如制造商、型号、固件版本等。
   - **特征**：
     - **制造商名称（Manufacturer Name String）**：`00002a29-0000-1000-8000-00805f9b34fb`
     - **型号编号（Model Number String）**：`00002a24-0000-1000-8000-00805f9b34fb`
     - **固件版本（Firmware Revision String）**：`00002a26-0000-1000-8000-00805f9b34fb`

2. **电池服务（Battery Service）**
   - **UUID**：`0000180f-0000-1000-8000-00805f9b34fb`
   - **功能**：监测和报告设备的电池电量。
   - **特征**：
     - **电池电量（Battery Level）**：`00002a19-0000-1000-8000-00805f9b34fb`，读/通知。

3. **心率服务（Heart Rate Service）**
   - **UUID**：`0000180d-0000-1000-8000-00805f9b34fb`
   - **功能**：监测和报告用户的心率数据。
   - **特征**：
     - **心率测量（Heart Rate Measurement）**：`00002a37-0000-1000-8000-00805f9b34fb`，通知。
     - **心率传感器位置（Body Sensor Location）**：`00002a38-0000-1000-8000-00805f9b34fb`，读。

4. **步数和活动监测服务**
   - **UUID**：自定义 UUID，例如 `00001816-0000-1000-8000-00805f9b34fb`
   - **功能**：监测和报告用户的步数和其他活动数据。
   - **特征**：
     - **步数计数（Step Count）**：自定义 UUID，读/通知。
     - **卡路里消耗（Calories Burned）**：自定义 UUID，读/通知。

5. **通知服务（Alert Notification Service）**
   - **UUID**：`00001811-0000-1000-8000-00805f9b34fb`
   - **功能**：接收和显示来自手机的通知，如来电、短信、社交媒体通知等。
   - **特征**：
     - **新通知（New Alert）**：`00002a46-0000-1000-8000-00805f9b34fb`，通知。
     - **未读通知状态（Unread Alert Status）**：`00002a45-0000-1000-8000-00805f9b34fb`，读/通知。

6. **时间服务（Current Time Service）**
   - **UUID**：`00001805-0000-1000-8000-00805f9b34fb`
   - **功能**：同步和显示当前时间。
   - **特征**：
     - **当前时间（Current Time）**：`00002a2b-0000-1000-8000-00805f9b34fb`，读/通知。

7. **自定义服务**
   - **UUID**：自定义 UUID，例如 `0000fff0-0000-1000-8000-00805f9b34fb`
   - **功能**：提供特定于智能手环制造商或应用的自定义功能。
   - **特征**：
     - **控制命令（Control Command）**：自定义 UUID，写。
     - **数据同步（Data Sync）**：自定义 UUID，读/写/通知。

### 使用示例

假设你使用 `nRF Connect` 应用连接到智能手环，这里是可能的操作示例：

1. **扫描并连接设备**
   - 打开 `nRF Connect` 应用并启动扫描，找到智能手环并连接。

2. **发现服务**
   - 连接设备后，应用会显示设备上的所有 GATT 服务和特征。

3. **读取设备信息**
   - 读取设备信息服务中的特征，如制造商名称和型号编号。

4. **监测电池电量**
   - 订阅电池电量特征的通知，以实时监测电池状态。

5. **接收心率数据**
   - 订阅心率测量特征的通知，实时接收心率数据。

6. **步数和活动监测**
   - 读取步数和卡路里消耗特征，或订阅这些特征的通知，以获取实时活动数据。

7. **处理通知**
   - 订阅新通知特征，接收并显示来自手机的通知。

### 总结

智能手环的 BLE 功能主要涵盖健康监测（如心率和步数）、设备信息、电池状态、通知以及自定义功能。通过这些 BLE 服务和特征，智能手环可以与手机应用程序交互，实现丰富的用户体验。

# 开源智能手环代码

开源智能手环项目可以帮助开发者了解如何实现智能手环的功能，并进行定制和扩展。以下是几个知名的开源智能手环项目：

### 1. Gadgetbridge
Gadgetbridge 是一个开源项目，旨在替代智能手环和智能手表的专有应用程序，支持多种设备如 Pebble、Mi Band、Amazfit 等。

- **项目地址**：https://github.com/Freeyourgadget/Gadgetbridge
- **功能**：
  - 设备配对和连接
  - 同步健康数据（步数、心率等）
  - 通知和来电提醒
  - 固件更新
  - 自定义表盘和应用程序

### 2. OpenBand
OpenBand 是一个开源智能手环项目，旨在开发一个完全开源的硬件和软件平台。

- **项目地址**：https://github.com/OpenBand
- **功能**：
  - 健康监测（心率、步数、睡眠等）
  - 通知和提醒
  - 实时数据同步
  - 开源硬件设计

### 3. Espruino on Puck.js
Espruino 是一个 JavaScript 运行环境，可以在低功耗设备上运行。Puck.js 是一个支持 BLE 的开源硬件设备，可以作为智能手环的开发平台。

- **项目地址**：https://github.com/espruino/Espruino
- **Puck.js 设备**：https://www.puck-js.com/
- **功能**：
  - 通过 JavaScript 编程实现智能手环功能
  - BLE 通信
  - 健康和活动监测
  - 通知和控制

### 4. InfiniTime
InfiniTime 是一个开源固件项目，专为 PineTime 智能手表设计，但也可以作为智能手环项目的参考。

- **项目地址**：https://github.com/InfiniTimeOrg/InfiniTime
- **功能**：
  - 实时操作系统（FreeRTOS）
  - 健康和活动监测（心率、步数等）
  - 通知和提醒
  - 音乐控制
  - 触摸屏交互

### 如何开始

1. **克隆代码库**
   ```bash
   git clone https://github.com/Freeyourgadget/Gadgetbridge.git
   cd Gadgetbridge
   ```

2. **构建项目**
   根据项目的构建说明（通常在 README 文件中）安装依赖并构建项目。例如，对于一个 Android 项目，你可能需要使用 Android Studio。

3. **运行和调试**
   将项目部署到支持的硬件设备上进行测试和调试。你可以修改代码以添加新的功能或定制现有功能。

4. **贡献**
   如果你对项目做了改进，欢迎向项目提交 Pull Request 以分享你的工作。

### 总结

这些开源项目为开发智能手环提供了丰富的资源和功能示例。通过研究和使用这些项目，你可以快速上手智能手环的开发，并根据需要进行定制和扩展。

# 蓝牙灯

可以用手机上的调色板调节颜色。



# 蓝牙智能锁



# 蓝牙mesh组网





# 参考资料

1、BLE蓝牙模块的应用场景

https://zhuanlan.zhihu.com/p/34604108