---
title: 系统设计（1）
date: 2022-11-19 22:08:33
tags:
	- 系统

---

--

这个是一个很大的话题，我慢慢了解慢慢学习吧。

以这个为主要入口，学习相关的知识。

https://github.com/summerjava/system-design-interview

有需要画图的，就用drawio来画一下。

# 设计实现一个pastebin

## 首先列出usecase和constraint

收集需求，把问题细化。

### usecase

有下面这些用例：

* 用户输入一些文字，我们给他返回随机生成的链接。
  * 超时时间
    * 默认没有超时。
    * 可以设置一个超时时间。
* 用户输入一个url，可以查看对应的文字。
* 用户是匿名的。
* 后台对各个文字的访问情况进行统计。
  * 例如每月统计一次。
* 后台删除过期的文字。
* 服务要高可用。

不考虑这些情况：

* 用户注册
* 用户登陆。
* 用户设置可见性。
* 用户可以指定链接。

### constraint

假设：

* 流量不均匀。
* 只允许粘贴文本。
* 最多1000万用户。
* 每个月1000万次写入。
* 每个月1亿次读取。
* 10:1的读写比。

计算使用情况

* 每个paste的size：一个paste 1KB，一个shortlink 7字节，总共1.27KB左右。
* 所以每个月就是12.7GB的数据产生。
* 每秒4个write。
* 每秒40个read。

## 然后是toplevel的设计



## 设计core Component

## 扩容



# 参考资料

